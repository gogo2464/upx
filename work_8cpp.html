<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: src/work.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('work_8cpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">work.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="system__headers_8h_source.html">util/system_headers.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="conf_8h_source.html">conf.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="file_8h_source.html">file.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="packmast_8h_source.html">packmast.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ui_8h_source.html">ui.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="membuffer_8h_source.html">util/membuffer.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for work.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="work_8cpp__incl.png" border="0" usemap="#asrc_2work_8cpp" alt=""/></div>
<map name="asrc_2work_8cpp" id="asrc_2work_8cpp">
<area shape="rect" title=" " alt="" coords="2344,5,2448,31"/>
<area shape="rect" href="system__headers_8h.html" title=" " alt="" coords="636,152,803,177"/>
<area shape="rect" href="conf_8h.html" title=" " alt="" coords="2232,79,2293,104"/>
<area shape="rect" href="file_8h.html" title=" " alt="" coords="2318,79,2372,104"/>
<area shape="rect" href="packmast_8h.html" title=" " alt="" coords="2397,79,2496,104"/>
<area shape="rect" href="ui_8h.html" title=" " alt="" coords="2520,79,2567,104"/>
<area shape="rect" href="membuffer_8h.html" title=" " alt="" coords="2878,79,3009,104"/>
<area shape="rect" href="system__defs_8h.html" title=" " alt="" coords="38,313,156,339"/>
<area shape="rect" href="system__features_8h.html" title=" " alt="" coords="26,233,168,258"/>
<area shape="rect" href="miniacc_8h.html" title=" " alt="" coords="193,233,278,258"/>
<area shape="rect" title=" " alt="" coords="303,233,374,258"/>
<area shape="rect" title=" " alt="" coords="398,233,465,258"/>
<area shape="rect" title=" " alt="" coords="490,233,576,258"/>
<area shape="rect" title=" " alt="" coords="600,233,650,258"/>
<area shape="rect" title=" " alt="" coords="674,233,766,258"/>
<area shape="rect" title=" " alt="" coords="790,233,850,258"/>
<area shape="rect" title=" " alt="" coords="874,233,960,258"/>
<area shape="rect" title=" " alt="" coords="984,233,1061,258"/>
<area shape="rect" title=" " alt="" coords="1086,225,1244,265"/>
<area shape="rect" title=" " alt="" coords="1269,233,1344,258"/>
<area shape="rect" href="system__check__predefs_8h.html" title=" " alt="" coords="647,387,830,412"/>
<area shape="rect" title=" " alt="" coords="200,313,271,339"/>
<area shape="rect" href="system__undefs_8h.html" title=" " alt="" coords="1419,152,1578,177"/>
<area shape="rect" href="version_8h.html" title=" " alt="" coords="1602,152,1685,177"/>
<area shape="rect" href="cxxlib_8h.html" title=" " alt="" coords="1709,152,1808,177"/>
<area shape="rect" title=" " alt="" coords="1832,152,2010,177"/>
<area shape="rect" title=" " alt="" coords="2034,152,2184,177"/>
<area shape="rect" href="snprintf_8h.html" title=" " alt="" coords="2208,152,2316,177"/>
<area shape="rect" href="util_8h.html" title=" " alt="" coords="2341,152,2421,177"/>
<area shape="rect" href="options_8h.html" title=" " alt="" coords="2445,152,2528,177"/>
<area shape="rect" href="except_8h.html" title=" " alt="" coords="2552,152,2631,177"/>
<area shape="rect" href="bele_8h.html" title=" " alt="" coords="2655,152,2718,177"/>
<area shape="rect" href="console_8h.html" title=" " alt="" coords="2742,152,2881,177"/>
<area shape="rect" href="raw__bytes_8h.html" title=" " alt="" coords="2906,152,3032,177"/>
<area shape="rect" href="xspan_8h.html" title=" " alt="" coords="3057,152,3156,177"/>
<area shape="rect" href="bele__policy_8h.html" title=" " alt="" coords="2633,233,2740,258"/>
<area shape="rect" href="xspan__impl_8h.html" title=" " alt="" coords="3052,233,3161,258"/>
<area shape="rect" href="xspan__fwd_8h.html" title=" " alt="" coords="3180,152,3283,177"/>
</map>
</div>
</div>
<p><a href="work_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structanonymous__namespace_02work_8cpp_03_1_1XStat.html">anonymous_namespace{work.cpp}::XStat</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespaceanonymous__namespace_02work_8cpp_03"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceanonymous__namespace_02work_8cpp_03.html">anonymous_namespace{work.cpp}</a></td></tr>
<tr class="memdesc:namespaceanonymous__namespace_02work_8cpp_03"><td class="mdescLeft">&#160;</td><td class="mdescRight">file util <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a06140a52b0cf2d776ddd1144fdeb45a7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="work_8cpp.html#a06140a52b0cf2d776ddd1144fdeb45a7">WANT_WINDOWS_LEAN_H</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a06140a52b0cf2d776ddd1144fdeb45a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a205578d9e90c3652235bd4a120cdc253"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="work_8cpp.html#a205578d9e90c3652235bd4a120cdc253">USE_UTIME</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a205578d9e90c3652235bd4a120cdc253"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20db287e60dec65f045372e3f8b00fe6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="work_8cpp.html#a20db287e60dec65f045372e3f8b00fe6">SH_DENYRW</a>&#160;&#160;&#160;(-1)</td></tr>
<tr class="separator:a20db287e60dec65f045372e3f8b00fe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaef4d3baa581a3da6ffc6f2f7780e7ac"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="work_8cpp.html#aaef4d3baa581a3da6ffc6f2f7780e7ac">SH_DENYWR</a>&#160;&#160;&#160;(-1)</td></tr>
<tr class="separator:aaef4d3baa581a3da6ffc6f2f7780e7ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fecf6e919238682bf20a72d9614f13f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="work_8cpp.html#a1fecf6e919238682bf20a72d9614f13f">IGNORE_ERROR</a>(var)&#160;&#160;&#160;<a class="el" href="bsd_8h.html#a6c477a55bf5dcbc8348ac123141512bb">ACC_UNUSED</a>(var)</td></tr>
<tr class="separator:a1fecf6e919238682bf20a72d9614f13f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a24868f7d224d8ecb7d81085d4f1ddb11"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceanonymous__namespace_02work_8cpp_03.html#a24868f7d224d8ecb7d81085d4f1ddb11">anonymous_namespace{work.cpp}::OpenMode</a> { <a class="el" href="namespaceanonymous__namespace_02work_8cpp_03.html#a24868f7d224d8ecb7d81085d4f1ddb11a1e9a10b3192119ab06757cc16fd4fc7c">anonymous_namespace{work.cpp}::RO_MUST_EXIST</a>
, <a class="el" href="namespaceanonymous__namespace_02work_8cpp_03.html#a24868f7d224d8ecb7d81085d4f1ddb11aabbfb9a542e05fba9a7fab7108800267">anonymous_namespace{work.cpp}::WO_MUST_EXIST_TRUNCATE</a>
, <a class="el" href="namespaceanonymous__namespace_02work_8cpp_03.html#a24868f7d224d8ecb7d81085d4f1ddb11ad437166ef201a2113cf054e86aef6da8">anonymous_namespace{work.cpp}::WO_MUST_CREATE</a>
, <a class="el" href="namespaceanonymous__namespace_02work_8cpp_03.html#a24868f7d224d8ecb7d81085d4f1ddb11aaa89720d300f9a7f15f245bf280b6e0f">anonymous_namespace{work.cpp}::WO_CREATE_OR_TRUNCATE</a>
 }</td></tr>
<tr class="separator:a24868f7d224d8ecb7d81085d4f1ddb11"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae97e4e584fe3a555d7b30bbd3d23210e"><td class="memItemLeft" align="right" valign="top">static constexpr int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceanonymous__namespace_02work_8cpp_03.html#ae97e4e584fe3a555d7b30bbd3d23210e">anonymous_namespace{work.cpp}::get_open_flags</a> (OpenMode om) noexcept</td></tr>
<tr class="separator:ae97e4e584fe3a555d7b30bbd3d23210e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a260445b322321a504b9aa2fb8f1e1929"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceanonymous__namespace_02work_8cpp_03.html#a260445b322321a504b9aa2fb8f1e1929">anonymous_namespace{work.cpp}::set_fd_timestamp</a> (int fd, const XStat *xst) noexcept</td></tr>
<tr class="separator:a260445b322321a504b9aa2fb8f1e1929"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae94d33f51eb588e4e22b848dfc45db9a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceanonymous__namespace_02work_8cpp_03.html#ae94d33f51eb588e4e22b848dfc45db9a">anonymous_namespace{work.cpp}::copy_file_contents</a> (const char *iname, const char *oname, OpenMode om, const XStat *oname_timestamp) <a class="el" href="conf_8h.html#aac314c25ecc359ec37c364e623d312c1">may_throw</a></td></tr>
<tr class="separator:ae94d33f51eb588e4e22b848dfc45db9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79af7be9577bd63d4f2a31e09c4b5640"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceanonymous__namespace_02work_8cpp_03.html#a79af7be9577bd63d4f2a31e09c4b5640">anonymous_namespace{work.cpp}::copy_file_attributes</a> (const XStat *xst, const char *oname, bool preserve_mode, bool preserve_ownership, bool preserve_timestamp) noexcept</td></tr>
<tr class="separator:a79af7be9577bd63d4f2a31e09c4b5640"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb26fb37f44aef462017c0319a0c7b51"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="work_8cpp.html#acb26fb37f44aef462017c0319a0c7b51">do_one_file</a> (const char *const iname, char *const oname) <a class="el" href="conf_8h.html#aac314c25ecc359ec37c364e623d312c1">may_throw</a></td></tr>
<tr class="memdesc:acb26fb37f44aef462017c0319a0c7b51"><td class="mdescLeft">&#160;</td><td class="mdescRight">process one file  <br /></td></tr>
<tr class="separator:acb26fb37f44aef462017c0319a0c7b51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca58fe437d9c78619cc91ef407e349ab"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="work_8cpp.html#aca58fe437d9c78619cc91ef407e349ab">unlink_ofile</a> (char *oname) noexcept</td></tr>
<tr class="memdesc:aca58fe437d9c78619cc91ef407e349ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">process all files from the commandline  <br /></td></tr>
<tr class="separator:aca58fe437d9c78619cc91ef407e349ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ec6798d280944a40890ad8f08dbe964"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="work_8cpp.html#a9ec6798d280944a40890ad8f08dbe964">do_files</a> (int i, int argc, char *argv[]) <a class="el" href="conf_8h.html#aac314c25ecc359ec37c364e623d312c1">may_throw</a></td></tr>
<tr class="separator:a9ec6798d280944a40890ad8f08dbe964"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a1fecf6e919238682bf20a72d9614f13f" name="a1fecf6e919238682bf20a72d9614f13f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fecf6e919238682bf20a72d9614f13f">&#9670;&#160;</a></span>IGNORE_ERROR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IGNORE_ERROR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="bsd_8h.html#a6c477a55bf5dcbc8348ac123141512bb">ACC_UNUSED</a>(var)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="work_8cpp_source.html#l00084">84</a> of file <a class="el" href="work_8cpp_source.html">work.cpp</a>.</p>

</div>
</div>
<a id="a20db287e60dec65f045372e3f8b00fe6" name="a20db287e60dec65f045372e3f8b00fe6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20db287e60dec65f045372e3f8b00fe6">&#9670;&#160;</a></span>SH_DENYRW</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SH_DENYRW&#160;&#160;&#160;(-1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="work_8cpp_source.html#l00061">61</a> of file <a class="el" href="work_8cpp_source.html">work.cpp</a>.</p>

</div>
</div>
<a id="aaef4d3baa581a3da6ffc6f2f7780e7ac" name="aaef4d3baa581a3da6ffc6f2f7780e7ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaef4d3baa581a3da6ffc6f2f7780e7ac">&#9670;&#160;</a></span>SH_DENYWR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SH_DENYWR&#160;&#160;&#160;(-1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="work_8cpp_source.html#l00064">64</a> of file <a class="el" href="work_8cpp_source.html">work.cpp</a>.</p>

</div>
</div>
<a id="a205578d9e90c3652235bd4a120cdc253" name="a205578d9e90c3652235bd4a120cdc253"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a205578d9e90c3652235bd4a120cdc253">&#9670;&#160;</a></span>USE_UTIME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USE_UTIME&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="work_8cpp_source.html#l00057">57</a> of file <a class="el" href="work_8cpp_source.html">work.cpp</a>.</p>

</div>
</div>
<a id="a06140a52b0cf2d776ddd1144fdeb45a7" name="a06140a52b0cf2d776ddd1144fdeb45a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06140a52b0cf2d776ddd1144fdeb45a7">&#9670;&#160;</a></span>WANT_WINDOWS_LEAN_H</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WANT_WINDOWS_LEAN_H&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="work_8cpp_source.html#l00036">36</a> of file <a class="el" href="work_8cpp_source.html">work.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9ec6798d280944a40890ad8f08dbe964" name="a9ec6798d280944a40890ad8f08dbe964"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ec6798d280944a40890ad8f08dbe964">&#9670;&#160;</a></span>do_files()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int do_files </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="work_8cpp_source.html#l00409">409</a> of file <a class="el" href="work_8cpp_source.html">work.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  409</span>                                                      {</div>
<div class="line"><span class="lineno">  410</span>    <a class="code hl_function" href="dt__check_8cpp.html#a3a6b242ecd120ddf74c7aefb91486186">upx_compiler_sanity_check</a>();</div>
<div class="line"><span class="lineno">  411</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;verbose &gt;= 1) {</div>
<div class="line"><span class="lineno">  412</span>        <a class="code hl_function" href="conf_8h.html#a58218aa11a9af319d6cdc27f5791dc80">show_header</a>();</div>
<div class="line"><span class="lineno">  413</span>        <a class="code hl_function" href="classUiPacker.html#ae8e681ac7f1e8491b9c72f509af118a8">UiPacker::uiHeader</a>();</div>
<div class="line"><span class="lineno">  414</span>    }</div>
<div class="line"><span class="lineno">  415</span> </div>
<div class="line"><span class="lineno">  416</span>    <span class="keywordflow">for</span> (; i &lt; argc; i++) {</div>
<div class="line"><span class="lineno">  417</span>        <a class="code hl_function" href="conf_8h.html#a5e191f1d1d6d96696cbabecfa40c11a5">infoHeader</a>();</div>
<div class="line"><span class="lineno">  418</span> </div>
<div class="line"><span class="lineno">  419</span>        <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> iname = argv[i];</div>
<div class="line"><span class="lineno">  420</span>        <span class="keywordtype">char</span> oname[ACC_FN_PATH_MAX + 1];</div>
<div class="line"><span class="lineno">  421</span>        oname[0] = 0;</div>
<div class="line"><span class="lineno">  422</span> </div>
<div class="line"><span class="lineno">  423</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  424</span>            <a class="code hl_function" href="work_8cpp.html#acb26fb37f44aef462017c0319a0c7b51">do_one_file</a>(iname, oname);</div>
<div class="line"><span class="lineno">  425</span>        } <span class="keywordflow">catch</span> (<span class="keyword">const</span> <a class="code hl_class" href="classException.html">Exception</a> &amp;e) {</div>
<div class="line"><span class="lineno">  426</span>            <a class="code hl_function" href="work_8cpp.html#aca58fe437d9c78619cc91ef407e349ab">unlink_ofile</a>(oname);</div>
<div class="line"><span class="lineno">  427</span>            <span class="keywordflow">if</span> (<a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;verbose &gt;= 1 || (<a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;verbose &gt;= 0 &amp;&amp; !e.<a class="code hl_function" href="classThrowable.html#a00278120ee39687561aad876502b9c2c">isWarning</a>()))</div>
<div class="line"><span class="lineno">  428</span>                <a class="code hl_function" href="conf_8h.html#ac214d3199ed0588967b705d709909d67">printErr</a>(iname, e);</div>
<div class="line"><span class="lineno">  429</span>            <a class="code hl_function" href="conf_8h.html#a6062a0a5a54e06d7a7cad6fc934b4204">main_set_exit_code</a>(e.<a class="code hl_function" href="classThrowable.html#a00278120ee39687561aad876502b9c2c">isWarning</a>() ? <a class="code hl_define" href="conf_8h.html#a0ba016aacc0146a0b5327b38fbf8cf71">EXIT_WARN</a> : <a class="code hl_define" href="conf_8h.html#a036a316feca78ed68d2f2a88cbf6fa8c">EXIT_ERROR</a>);</div>
<div class="line"><span class="lineno">  430</span>            <span class="comment">// this is not fatal, continue processing more files</span></div>
<div class="line"><span class="lineno">  431</span>        } <span class="keywordflow">catch</span> (<span class="keyword">const</span> <a class="code hl_class" href="classError.html">Error</a> &amp;e) {</div>
<div class="line"><span class="lineno">  432</span>            <a class="code hl_function" href="work_8cpp.html#aca58fe437d9c78619cc91ef407e349ab">unlink_ofile</a>(oname);</div>
<div class="line"><span class="lineno">  433</span>            <a class="code hl_function" href="conf_8h.html#ac214d3199ed0588967b705d709909d67">printErr</a>(iname, e);</div>
<div class="line"><span class="lineno">  434</span>            <a class="code hl_function" href="conf_8h.html#a6062a0a5a54e06d7a7cad6fc934b4204">main_set_exit_code</a>(<a class="code hl_define" href="conf_8h.html#a036a316feca78ed68d2f2a88cbf6fa8c">EXIT_ERROR</a>);</div>
<div class="line"><span class="lineno">  435</span>            <span class="keywordflow">return</span> -1; <span class="comment">// fatal error</span></div>
<div class="line"><span class="lineno">  436</span>        } <span class="keywordflow">catch</span> (std::bad_alloc *e) {</div>
<div class="line"><span class="lineno">  437</span>            <a class="code hl_function" href="work_8cpp.html#aca58fe437d9c78619cc91ef407e349ab">unlink_ofile</a>(oname);</div>
<div class="line"><span class="lineno">  438</span>            <a class="code hl_function" href="conf_8h.html#ac214d3199ed0588967b705d709909d67">printErr</a>(iname, <span class="stringliteral">&quot;out of memory&quot;</span>);</div>
<div class="line"><span class="lineno">  439</span>            <a class="code hl_define" href="conf_8h.html#a5f64c424fc4e04a8b3afd79a1e245625">UNUSED</a>(e);</div>
<div class="line"><span class="lineno">  440</span>            <span class="comment">// delete e;</span></div>
<div class="line"><span class="lineno">  441</span>            <a class="code hl_function" href="conf_8h.html#a6062a0a5a54e06d7a7cad6fc934b4204">main_set_exit_code</a>(<a class="code hl_define" href="conf_8h.html#a036a316feca78ed68d2f2a88cbf6fa8c">EXIT_ERROR</a>);</div>
<div class="line"><span class="lineno">  442</span>            <span class="keywordflow">return</span> -1; <span class="comment">// fatal error</span></div>
<div class="line"><span class="lineno">  443</span>        } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::bad_alloc &amp;) {</div>
<div class="line"><span class="lineno">  444</span>            <a class="code hl_function" href="work_8cpp.html#aca58fe437d9c78619cc91ef407e349ab">unlink_ofile</a>(oname);</div>
<div class="line"><span class="lineno">  445</span>            <a class="code hl_function" href="conf_8h.html#ac214d3199ed0588967b705d709909d67">printErr</a>(iname, <span class="stringliteral">&quot;out of memory&quot;</span>);</div>
<div class="line"><span class="lineno">  446</span>            <a class="code hl_function" href="conf_8h.html#a6062a0a5a54e06d7a7cad6fc934b4204">main_set_exit_code</a>(<a class="code hl_define" href="conf_8h.html#a036a316feca78ed68d2f2a88cbf6fa8c">EXIT_ERROR</a>);</div>
<div class="line"><span class="lineno">  447</span>            <span class="keywordflow">return</span> -1; <span class="comment">// fatal error</span></div>
<div class="line"><span class="lineno">  448</span>        } <span class="keywordflow">catch</span> (std::exception *e) {</div>
<div class="line"><span class="lineno">  449</span>            <a class="code hl_function" href="work_8cpp.html#aca58fe437d9c78619cc91ef407e349ab">unlink_ofile</a>(oname);</div>
<div class="line"><span class="lineno">  450</span>            <a class="code hl_function" href="conf_8h.html#a949f70c2ca1e1beaecea9a2b91e8582a">printUnhandledException</a>(iname, e);</div>
<div class="line"><span class="lineno">  451</span>            <span class="comment">// delete e;</span></div>
<div class="line"><span class="lineno">  452</span>            <a class="code hl_function" href="conf_8h.html#a6062a0a5a54e06d7a7cad6fc934b4204">main_set_exit_code</a>(<a class="code hl_define" href="conf_8h.html#a036a316feca78ed68d2f2a88cbf6fa8c">EXIT_ERROR</a>);</div>
<div class="line"><span class="lineno">  453</span>            <span class="keywordflow">return</span> -1; <span class="comment">// fatal error</span></div>
<div class="line"><span class="lineno">  454</span>        } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception &amp;e) {</div>
<div class="line"><span class="lineno">  455</span>            <a class="code hl_function" href="work_8cpp.html#aca58fe437d9c78619cc91ef407e349ab">unlink_ofile</a>(oname);</div>
<div class="line"><span class="lineno">  456</span>            <a class="code hl_function" href="conf_8h.html#a949f70c2ca1e1beaecea9a2b91e8582a">printUnhandledException</a>(iname, &amp;e);</div>
<div class="line"><span class="lineno">  457</span>            <a class="code hl_function" href="conf_8h.html#a6062a0a5a54e06d7a7cad6fc934b4204">main_set_exit_code</a>(<a class="code hl_define" href="conf_8h.html#a036a316feca78ed68d2f2a88cbf6fa8c">EXIT_ERROR</a>);</div>
<div class="line"><span class="lineno">  458</span>            <span class="keywordflow">return</span> -1; <span class="comment">// fatal error</span></div>
<div class="line"><span class="lineno">  459</span>        } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno">  460</span>            <a class="code hl_function" href="work_8cpp.html#aca58fe437d9c78619cc91ef407e349ab">unlink_ofile</a>(oname);</div>
<div class="line"><span class="lineno">  461</span>            <a class="code hl_function" href="conf_8h.html#a949f70c2ca1e1beaecea9a2b91e8582a">printUnhandledException</a>(iname, <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  462</span>            <a class="code hl_function" href="conf_8h.html#a6062a0a5a54e06d7a7cad6fc934b4204">main_set_exit_code</a>(<a class="code hl_define" href="conf_8h.html#a036a316feca78ed68d2f2a88cbf6fa8c">EXIT_ERROR</a>);</div>
<div class="line"><span class="lineno">  463</span>            <span class="keywordflow">return</span> -1; <span class="comment">// fatal error</span></div>
<div class="line"><span class="lineno">  464</span>        }</div>
<div class="line"><span class="lineno">  465</span>    }</div>
<div class="line"><span class="lineno">  466</span> </div>
<div class="line"><span class="lineno">  467</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;cmd == <a class="code hl_enumvalue" href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a87eabf5bdd0bf150006b8a1c9ca5ec86">CMD_COMPRESS</a>)</div>
<div class="line"><span class="lineno">  468</span>        <a class="code hl_function" href="classUiPacker.html#ad872e08ac0689db01af6b92981240926">UiPacker::uiPackTotal</a>();</div>
<div class="line"><span class="lineno">  469</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;cmd == <a class="code hl_enumvalue" href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a4dde2c8677197d9491e8db5ad4e6c1f3">CMD_DECOMPRESS</a>)</div>
<div class="line"><span class="lineno">  470</span>        <a class="code hl_function" href="classUiPacker.html#a12f3b46c4adf8051276daccaff15f2ee">UiPacker::uiUnpackTotal</a>();</div>
<div class="line"><span class="lineno">  471</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;cmd == <a class="code hl_enumvalue" href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a3e98c17356a41ea6840cd0241211d99d">CMD_LIST</a>)</div>
<div class="line"><span class="lineno">  472</span>        <a class="code hl_function" href="classUiPacker.html#a2c6a2659f3d92d26f4ac922fc42f4252">UiPacker::uiListTotal</a>();</div>
<div class="line"><span class="lineno">  473</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;cmd == <a class="code hl_enumvalue" href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a12e11ac7c830ec6038306c9803cdd949">CMD_TEST</a>)</div>
<div class="line"><span class="lineno">  474</span>        <a class="code hl_function" href="classUiPacker.html#a1bb9600ca81f752d1da2213ad4ea767b">UiPacker::uiTestTotal</a>();</div>
<div class="line"><span class="lineno">  475</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;cmd == <a class="code hl_enumvalue" href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a1be0f2940b3c4867de69288c4438f27c">CMD_FILEINFO</a>)</div>
<div class="line"><span class="lineno">  476</span>        <a class="code hl_function" href="classUiPacker.html#a1af5913735a3fc91064b8ea71a62498b">UiPacker::uiFileInfoTotal</a>();</div>
<div class="line"><span class="lineno">  477</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  478</span>}</div>
<div class="ttc" id="aclassError_html"><div class="ttname"><a href="classError.html">Error</a></div><div class="ttdef"><b>Definition:</b> <a href="except_8h_source.html#l00080">except.h:80</a></div></div>
<div class="ttc" id="aclassException_html"><div class="ttname"><a href="classException.html">Exception</a></div><div class="ttdef"><b>Definition:</b> <a href="except_8h_source.html#l00073">except.h:73</a></div></div>
<div class="ttc" id="aclassThrowable_html_a00278120ee39687561aad876502b9c2c"><div class="ttname"><a href="classThrowable.html#a00278120ee39687561aad876502b9c2c">Throwable::isWarning</a></div><div class="ttdeci">bool isWarning() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="except_8h_source.html#l00045">except.h:45</a></div></div>
<div class="ttc" id="aclassUiPacker_html_a12f3b46c4adf8051276daccaff15f2ee"><div class="ttname"><a href="classUiPacker.html#a12f3b46c4adf8051276daccaff15f2ee">UiPacker::uiUnpackTotal</a></div><div class="ttdeci">static void uiUnpackTotal()</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l00507">ui.cpp:507</a></div></div>
<div class="ttc" id="aclassUiPacker_html_a1af5913735a3fc91064b8ea71a62498b"><div class="ttname"><a href="classUiPacker.html#a1af5913735a3fc91064b8ea71a62498b">UiPacker::uiFileInfoTotal</a></div><div class="ttdeci">static void uiFileInfoTotal()</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l00590">ui.cpp:590</a></div></div>
<div class="ttc" id="aclassUiPacker_html_a1bb9600ca81f752d1da2213ad4ea767b"><div class="ttname"><a href="classUiPacker.html#a1bb9600ca81f752d1da2213ad4ea767b">UiPacker::uiTestTotal</a></div><div class="ttdeci">static void uiTestTotal()</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l00563">ui.cpp:563</a></div></div>
<div class="ttc" id="aclassUiPacker_html_a2c6a2659f3d92d26f4ac922fc42f4252"><div class="ttname"><a href="classUiPacker.html#a2c6a2659f3d92d26f4ac922fc42f4252">UiPacker::uiListTotal</a></div><div class="ttdeci">static void uiListTotal(bool uncompress=false)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l00528">ui.cpp:528</a></div></div>
<div class="ttc" id="aclassUiPacker_html_ad872e08ac0689db01af6b92981240926"><div class="ttname"><a href="classUiPacker.html#ad872e08ac0689db01af6b92981240926">UiPacker::uiPackTotal</a></div><div class="ttdeci">static void uiPackTotal()</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l00476">ui.cpp:476</a></div></div>
<div class="ttc" id="aclassUiPacker_html_ae8e681ac7f1e8491b9c72f509af118a8"><div class="ttname"><a href="classUiPacker.html#ae8e681ac7f1e8491b9c72f509af118a8">UiPacker::uiHeader</a></div><div class="ttdeci">static void uiHeader()</div><div class="ttdoc">util</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l00596">ui.cpp:596</a></div></div>
<div class="ttc" id="aconf_8h_html_a036a316feca78ed68d2f2a88cbf6fa8c"><div class="ttname"><a href="conf_8h.html#a036a316feca78ed68d2f2a88cbf6fa8c">EXIT_ERROR</a></div><div class="ttdeci">#define EXIT_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="conf_8h_source.html#l00497">conf.h:497</a></div></div>
<div class="ttc" id="aconf_8h_html_a0ba016aacc0146a0b5327b38fbf8cf71"><div class="ttname"><a href="conf_8h.html#a0ba016aacc0146a0b5327b38fbf8cf71">EXIT_WARN</a></div><div class="ttdeci">#define EXIT_WARN</div><div class="ttdef"><b>Definition:</b> <a href="conf_8h_source.html#l00498">conf.h:498</a></div></div>
<div class="ttc" id="aconf_8h_html_a58218aa11a9af319d6cdc27f5791dc80"><div class="ttname"><a href="conf_8h.html#a58218aa11a9af319d6cdc27f5791dc80">show_header</a></div><div class="ttdeci">void show_header()</div><div class="ttdef"><b>Definition:</b> <a href="help_8cpp_source.html#l00052">help.cpp:52</a></div></div>
<div class="ttc" id="aconf_8h_html_a5e191f1d1d6d96696cbabecfa40c11a5"><div class="ttname"><a href="conf_8h.html#a5e191f1d1d6d96696cbabecfa40c11a5">infoHeader</a></div><div class="ttdeci">void void void void void void infoHeader()</div><div class="ttdef"><b>Definition:</b> <a href="msg_8cpp_source.html#l00176">msg.cpp:176</a></div></div>
<div class="ttc" id="aconf_8h_html_a5f64c424fc4e04a8b3afd79a1e245625"><div class="ttname"><a href="conf_8h.html#a5f64c424fc4e04a8b3afd79a1e245625">UNUSED</a></div><div class="ttdeci">#define UNUSED(var)</div><div class="ttdef"><b>Definition:</b> <a href="conf_8h_source.html#l00239">conf.h:239</a></div></div>
<div class="ttc" id="aconf_8h_html_a6062a0a5a54e06d7a7cad6fc934b4204"><div class="ttname"><a href="conf_8h.html#a6062a0a5a54e06d7a7cad6fc934b4204">main_set_exit_code</a></div><div class="ttdeci">bool main_set_exit_code(int ec)</div><div class="ttdef"><b>Definition:</b> <a href="main_8cpp_source.html#l00109">main.cpp:109</a></div></div>
<div class="ttc" id="aconf_8h_html_a949f70c2ca1e1beaecea9a2b91e8582a"><div class="ttname"><a href="conf_8h.html#a949f70c2ca1e1beaecea9a2b91e8582a">printUnhandledException</a></div><div class="ttdeci">void printUnhandledException(const char *iname, const std::exception *e) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="msg_8cpp_source.html#l00145">msg.cpp:145</a></div></div>
<div class="ttc" id="aconf_8h_html_ac214d3199ed0588967b705d709909d67"><div class="ttname"><a href="conf_8h.html#ac214d3199ed0588967b705d709909d67">printErr</a></div><div class="ttdeci">void printErr(const char *iname, const Throwable &amp;e) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="msg_8cpp_source.html#l00101">msg.cpp:101</a></div></div>
<div class="ttc" id="adt__check_8cpp_html_a3a6b242ecd120ddf74c7aefb91486186"><div class="ttname"><a href="dt__check_8cpp.html#a3a6b242ecd120ddf74c7aefb91486186">upx_compiler_sanity_check</a></div><div class="ttdeci">void upx_compiler_sanity_check(void) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="dt__check_8cpp_source.html#l00850">dt_check.cpp:850</a></div></div>
<div class="ttc" id="aoptions_8cpp_html_a887b9edd7a68b4cde1de1f0d7ac1d6eb"><div class="ttname"><a href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a></div><div class="ttdeci">#define opt</div></div>
<div class="ttc" id="aoptions_8h_html_a99fb83031ce9923c84392b4e92f956b5a12e11ac7c830ec6038306c9803cdd949"><div class="ttname"><a href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a12e11ac7c830ec6038306c9803cdd949">CMD_TEST</a></div><div class="ttdeci">@ CMD_TEST</div><div class="ttdef"><b>Definition:</b> <a href="options_8h_source.html#l00048">options.h:48</a></div></div>
<div class="ttc" id="aoptions_8h_html_a99fb83031ce9923c84392b4e92f956b5a1be0f2940b3c4867de69288c4438f27c"><div class="ttname"><a href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a1be0f2940b3c4867de69288c4438f27c">CMD_FILEINFO</a></div><div class="ttdeci">@ CMD_FILEINFO</div><div class="ttdef"><b>Definition:</b> <a href="options_8h_source.html#l00050">options.h:50</a></div></div>
<div class="ttc" id="aoptions_8h_html_a99fb83031ce9923c84392b4e92f956b5a3e98c17356a41ea6840cd0241211d99d"><div class="ttname"><a href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a3e98c17356a41ea6840cd0241211d99d">CMD_LIST</a></div><div class="ttdeci">@ CMD_LIST</div><div class="ttdef"><b>Definition:</b> <a href="options_8h_source.html#l00049">options.h:49</a></div></div>
<div class="ttc" id="aoptions_8h_html_a99fb83031ce9923c84392b4e92f956b5a4dde2c8677197d9491e8db5ad4e6c1f3"><div class="ttname"><a href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a4dde2c8677197d9491e8db5ad4e6c1f3">CMD_DECOMPRESS</a></div><div class="ttdeci">@ CMD_DECOMPRESS</div><div class="ttdef"><b>Definition:</b> <a href="options_8h_source.html#l00047">options.h:47</a></div></div>
<div class="ttc" id="aoptions_8h_html_a99fb83031ce9923c84392b4e92f956b5a87eabf5bdd0bf150006b8a1c9ca5ec86"><div class="ttname"><a href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a87eabf5bdd0bf150006b8a1c9ca5ec86">CMD_COMPRESS</a></div><div class="ttdeci">@ CMD_COMPRESS</div><div class="ttdef"><b>Definition:</b> <a href="options_8h_source.html#l00046">options.h:46</a></div></div>
<div class="ttc" id="awork_8cpp_html_aca58fe437d9c78619cc91ef407e349ab"><div class="ttname"><a href="work_8cpp.html#aca58fe437d9c78619cc91ef407e349ab">unlink_ofile</a></div><div class="ttdeci">static void unlink_ofile(char *oname) noexcept</div><div class="ttdoc">process all files from the commandline</div><div class="ttdef"><b>Definition:</b> <a href="work_8cpp_source.html#l00402">work.cpp:402</a></div></div>
<div class="ttc" id="awork_8cpp_html_acb26fb37f44aef462017c0319a0c7b51"><div class="ttname"><a href="work_8cpp.html#acb26fb37f44aef462017c0319a0c7b51">do_one_file</a></div><div class="ttdeci">void do_one_file(const char *const iname, char *const oname) may_throw</div><div class="ttdoc">process one file</div><div class="ttdef"><b>Definition:</b> <a href="work_8cpp_source.html#l00207">work.cpp:207</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a87eabf5bdd0bf150006b8a1c9ca5ec86">CMD_COMPRESS</a>, <a class="el" href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a4dde2c8677197d9491e8db5ad4e6c1f3">CMD_DECOMPRESS</a>, <a class="el" href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a1be0f2940b3c4867de69288c4438f27c">CMD_FILEINFO</a>, <a class="el" href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a3e98c17356a41ea6840cd0241211d99d">CMD_LIST</a>, <a class="el" href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a12e11ac7c830ec6038306c9803cdd949">CMD_TEST</a>, <a class="el" href="work_8cpp.html#acb26fb37f44aef462017c0319a0c7b51">do_one_file()</a>, <a class="el" href="conf_8h.html#a036a316feca78ed68d2f2a88cbf6fa8c">EXIT_ERROR</a>, <a class="el" href="conf_8h.html#a0ba016aacc0146a0b5327b38fbf8cf71">EXIT_WARN</a>, <a class="el" href="conf_8h.html#a5e191f1d1d6d96696cbabecfa40c11a5">infoHeader()</a>, <a class="el" href="classThrowable.html#a00278120ee39687561aad876502b9c2c">Throwable::isWarning()</a>, <a class="el" href="conf_8h.html#a6062a0a5a54e06d7a7cad6fc934b4204">main_set_exit_code()</a>, <a class="el" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>, <a class="el" href="conf_8h.html#ac214d3199ed0588967b705d709909d67">printErr()</a>, <a class="el" href="conf_8h.html#a949f70c2ca1e1beaecea9a2b91e8582a">printUnhandledException()</a>, <a class="el" href="conf_8h.html#a58218aa11a9af319d6cdc27f5791dc80">show_header()</a>, <a class="el" href="classUiPacker.html#a1af5913735a3fc91064b8ea71a62498b">UiPacker::uiFileInfoTotal()</a>, <a class="el" href="classUiPacker.html#ae8e681ac7f1e8491b9c72f509af118a8">UiPacker::uiHeader()</a>, <a class="el" href="classUiPacker.html#a2c6a2659f3d92d26f4ac922fc42f4252">UiPacker::uiListTotal()</a>, <a class="el" href="classUiPacker.html#ad872e08ac0689db01af6b92981240926">UiPacker::uiPackTotal()</a>, <a class="el" href="classUiPacker.html#a1bb9600ca81f752d1da2213ad4ea767b">UiPacker::uiTestTotal()</a>, <a class="el" href="classUiPacker.html#a12f3b46c4adf8051276daccaff15f2ee">UiPacker::uiUnpackTotal()</a>, <a class="el" href="work_8cpp.html#aca58fe437d9c78619cc91ef407e349ab">unlink_ofile()</a>, <a class="el" href="conf_8h.html#a5f64c424fc4e04a8b3afd79a1e245625">UNUSED</a>, and <a class="el" href="dt__check_8cpp.html#a3a6b242ecd120ddf74c7aefb91486186">upx_compiler_sanity_check()</a>.</p>

<p class="reference">Referenced by <a class="el" href="conf_8h.html#ae733ccfc8b1bfd23af63d56f51903f1d">upx_main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="work_8cpp_a9ec6798d280944a40890ad8f08dbe964_cgraph.png" border="0" usemap="#awork_8cpp_a9ec6798d280944a40890ad8f08dbe964_cgraph" alt=""/></div>
<map name="awork_8cpp_a9ec6798d280944a40890ad8f08dbe964_cgraph" id="awork_8cpp_a9ec6798d280944a40890ad8f08dbe964_cgraph">
<area shape="rect" title=" " alt="" coords="5,1184,77,1209"/>
<area shape="rect" href="work_8cpp.html#acb26fb37f44aef462017c0319a0c7b51" title="process one file" alt="" coords="437,720,533,745"/>
<area shape="rect" href="msg_8cpp.html#a6c68721543d1282ec2eca61e329ecdae" title=" " alt="" coords="171,884,266,909"/>
<area shape="rect" href="classThrowable.html#a00278120ee39687561aad876502b9c2c" title=" " alt="" coords="137,933,300,958"/>
<area shape="rect" href="main_8cpp.html#a6062a0a5a54e06d7a7cad6fc934b4204" title=" " alt="" coords="143,982,295,1008"/>
<area shape="rect" href="msg_8cpp.html#ac214d3199ed0588967b705d709909d67" title=" " alt="" coords="449,1481,520,1506"/>
<area shape="rect" href="msg_8cpp.html#a949f70c2ca1e1beaecea9a2b91e8582a" title=" " alt="" coords="125,1430,312,1456"/>
<area shape="rect" href="help_8cpp.html#ac21a107d06adc68c01d158ae5cce8934" title=" " alt="" coords="165,1134,273,1160"/>
<area shape="rect" href="classUiPacker.html#a1af5913735a3fc91064b8ea71a62498b" title=" " alt="" coords="130,1184,307,1209"/>
<area shape="rect" href="classUiPacker.html#ae8e681ac7f1e8491b9c72f509af118a8" title="util" alt="" coords="146,1233,291,1258"/>
<area shape="rect" href="classUiPacker.html#a2c6a2659f3d92d26f4ac922fc42f4252" title=" " alt="" coords="409,1330,561,1356"/>
<area shape="rect" href="classUiPacker.html#ad872e08ac0689db01af6b92981240926" title=" " alt="" coords="139,1282,298,1308"/>
<area shape="rect" href="classUiPacker.html#a1bb9600ca81f752d1da2213ad4ea767b" title=" " alt="" coords="141,1381,296,1406"/>
<area shape="rect" href="classUiPacker.html#a12f3b46c4adf8051276daccaff15f2ee" title=" " alt="" coords="129,1332,308,1357"/>
<area shape="rect" href="work_8cpp.html#aca58fe437d9c78619cc91ef407e349ab" title="process all files from the commandline" alt="" coords="436,297,533,322"/>
<area shape="rect" href="dt__check_8cpp.html#a3a6b242ecd120ddf74c7aefb91486186" title=" " alt="" coords="140,1570,297,1610"/>
<area shape="rect" href="classFileBase.html#ad1760af00c23be3c3dd2f9eda2f0c10d" title=" " alt="" coords="1160,741,1287,766"/>
<area shape="rect" href="except_8cpp.html#a6b04d8d7658873fe2173bfbfed0a3b1b" title=" " alt="" coords="1339,544,1476,569"/>
<area shape="rect" href="namespaceanonymous__namespace_02work_8cpp_03.html#a79af7be9577bd63d4f2a31e09c4b5640" title=" " alt="" coords="665,473,845,528"/>
<area shape="rect" href="namespaceanonymous__namespace_02work_8cpp_03.html#ae94d33f51eb588e4e22b848dfc45db9a" title=" " alt="" coords="665,705,845,760"/>
<area shape="rect" href="namespaceanonymous__namespace_02work_8cpp_03.html#ae97e4e584fe3a555d7b30bbd3d23210e" title=" " alt="" coords="901,594,1108,634"/>
<area shape="rect" href="classFileBase.html#ac24bcc9c4aa5052ddf9b94672b6fd48e" title=" " alt="" coords="943,658,1066,684"/>
<area shape="rect" href="namespaceanonymous__namespace_02work_8cpp_03.html#a260445b322321a504b9aa2fb8f1e1929" title=" " alt="" coords="915,760,1095,814"/>
<area shape="rect" href="classInputFile.html#a78a66fc063b1267d37b2d1e02f20003e" title="InputFile." alt="" coords="942,544,1067,569"/>
<area shape="rect" href="classOutputFile.html#a0d75cc5db3e35886b2bacf3dd5905b2e" title="OutputFile." alt="" coords="937,890,1073,916"/>
<area shape="rect" href="classPackMaster.html#a5098f0b19583e56fc898dbcfce0c78aa" title=" " alt="" coords="680,886,831,912"/>
<area shape="rect" href="classFileBase.html#a7ac53047ea0158b99c3c4fcedf579505" title=" " alt="" coords="690,936,821,961"/>
<area shape="rect" href="classPackMaster.html#a66204c58becefb592e13c0f868cead0a" title=" " alt="" coords="693,985,818,1010"/>
<area shape="rect" href="util_8cpp.html#a822ef1a8d7f44a14b9c655a2e456940b" title=" " alt="" coords="696,1137,815,1162"/>
<area shape="rect" href="snprintf_8h.html#ad78f94ea2a472d48ab6ea8e50529ba32" title=" " alt="" coords="973,1137,1036,1162"/>
<area shape="rect" href="util_8cpp.html#afd535abdda123db1d1b691b588917162" title=" " alt="" coords="691,1236,820,1261"/>
<area shape="rect" href="util_8h.html#ad55181add5f2758a5f49cf106faef962" title="upx_rsize_t and mem_size: assert sane memory buffer sizes to protect against integer overflows and ma..." alt="" coords="670,1186,841,1212"/>
<area shape="rect" href="classOutputFile.html#a02cf6b0b957ccb50ae5658b3daefdf9f" title=" " alt="" coords="919,1186,1090,1212"/>
<area shape="rect" href="classPackMaster.html#a223a62e50f79d5f209271caad841e5f4" title="delegation from work.cpp" alt="" coords="687,73,823,98"/>
<area shape="rect" href="classFileBase.html#aca8751eb666a6202c1e29d052fc9f4b2" title=" " alt="" coords="1156,172,1291,197"/>
<area shape="rect" href="classPackMaster.html#aab20f18a17210949106304c0517f8472" title=" " alt="" coords="690,122,821,148"/>
<area shape="rect" href="except_8cpp.html#a57b532c382fd20e682bf0393b6d63050" title="other" alt="" coords="685,172,825,197"/>
<area shape="rect" href="classUiPacker.html#a71f8d303c88d9598edabbefd6abebca3" title=" " alt="" coords="657,221,853,246"/>
<area shape="rect" href="classFileBase.html#adb3ef7200b8bc7cb31900c6c56f223f7" title=" " alt="" coords="693,372,818,397"/>
<area shape="rect" href="classFileBase.html#a58f395d46f5df0c5c10c88f0f5b89924" title=" " alt="" coords="909,272,1101,297"/>
<area shape="rect" href="classPackMaster.html#ab6d3e1bfceab7bbd80afb210808bdbe3" title=" " alt="" coords="679,322,831,348"/>
<area shape="rect" href="snprintf_8cpp.html#aefb5ecd87245d4c8804418d9fd916d5f" title=" " alt="" coords="935,1388,1074,1413"/>
<area shape="rect" href="main_8cpp.html#a2eb5310e89ae9d2b6ae820260e9e1926" title=" " alt="" coords="449,670,521,696"/>
<area shape="rect" href="msg_8cpp.html#aa1f2d3914fb7d6a826e7276e8f542847" title=" " alt="" coords="719,1654,792,1680"/>
<area shape="rect" href="except_8cpp.html#af518f5666611b39a8cfcfa958b7bb0b2" title="util" alt="" coords="673,1489,837,1514"/>
<area shape="rect" href="msg_8cpp.html#a9245a4b2bc408a9166c389839ff85911" title=" " alt="" coords="961,1546,1048,1572"/>
<area shape="rect" href="ui_8cpp.html#a0b3f1497cefecad060e020f390bf0dcc" title=" " alt="" coords="722,1337,789,1362"/>
<area shape="rect" href="classUiPacker.html#a2d4c8a694dce63b0beed830e7c9ff66b" title=" " alt="" coords="415,1380,554,1405"/>
<area shape="rect" href="structanonymous__namespace_02dt__check_8cpp_03_1_1CheckIntegral.html#afcb7c60eadb8c3da2b6072f5d04db698" title=" " alt="" coords="372,1661,597,1716"/>
<area shape="rect" href="structanonymous__namespace_02dt__check_8cpp_03_1_1CheckSignedness.html#a28097208c875b083c9eb580cf8f8e70f" title=" " alt="" coords="360,1530,609,1585"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="work_8cpp_a9ec6798d280944a40890ad8f08dbe964_icgraph.png" border="0" usemap="#awork_8cpp_a9ec6798d280944a40890ad8f08dbe964_icgraph" alt=""/></div>
<map name="awork_8cpp_a9ec6798d280944a40890ad8f08dbe964_icgraph" id="awork_8cpp_a9ec6798d280944a40890ad8f08dbe964_icgraph">
<area shape="rect" title=" " alt="" coords="243,5,315,31"/>
<area shape="rect" href="main_8cpp.html#ae733ccfc8b1bfd23af63d56f51903f1d" title="main entry point" alt="" coords="108,5,195,31"/>
<area shape="rect" href="main_8cpp.html#a7726c3c4e37d3478021cf41b755207eb" title="real entry point" alt="" coords="5,5,60,31"/>
</map>
</div>

</div>
</div>
<a id="acb26fb37f44aef462017c0319a0c7b51" name="acb26fb37f44aef462017c0319a0c7b51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb26fb37f44aef462017c0319a0c7b51">&#9670;&#160;</a></span>do_one_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_one_file </td>
          <td>(</td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>iname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *const&#160;</td>
          <td class="paramname"><em>oname</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>process one file </p>

<p class="definition">Definition at line <a class="el" href="work_8cpp_source.html#l00207">207</a> of file <a class="el" href="work_8cpp_source.html">work.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  207</span>                                                                       {</div>
<div class="line"><span class="lineno">  208</span>    oname[0] = 0; <span class="comment">// make empty</span></div>
<div class="line"><span class="lineno">  209</span> </div>
<div class="line"><span class="lineno">  210</span>    <span class="comment">// check iname stat</span></div>
<div class="line"><span class="lineno">  211</span>    XStat xst = {};</div>
<div class="line"><span class="lineno">  212</span>    <span class="keyword">struct </span>stat &amp;st = xst.st;</div>
<div class="line"><span class="lineno">  213</span><span class="preprocessor">#if HAVE_LSTAT</span></div>
<div class="line"><span class="lineno">  214</span>    <span class="keywordtype">int</span> rr = lstat(iname, &amp;st);</div>
<div class="line"><span class="lineno">  215</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  216</span>    <span class="keywordtype">int</span> rr = stat(iname, &amp;st);</div>
<div class="line"><span class="lineno">  217</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  218</span>    <span class="keywordflow">if</span> (rr != 0) {</div>
<div class="line"><span class="lineno">  219</span>        <span class="keywordflow">if</span> (errno == <a class="code hl_define" href="bsd_8h.html#a03e689f378f643d16ea7537918528a48">ENOENT</a>)</div>
<div class="line"><span class="lineno">  220</span>            <span class="keywordflow">throw</span> <a class="code hl_class" href="classFileNotFoundException.html">FileNotFoundException</a>(iname, errno);</div>
<div class="line"><span class="lineno">  221</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  222</span>            <a class="code hl_function" href="except_8cpp.html#a6b04d8d7658873fe2173bfbfed0a3b1b">throwIOException</a>(iname, errno);</div>
<div class="line"><span class="lineno">  223</span>    }</div>
<div class="line"><span class="lineno">  224</span><span class="preprocessor">#if HAVE_LSTAT</span></div>
<div class="line"><span class="lineno">  225</span>    <span class="keywordflow">if</span> (S_ISLNK(st.st_mode))</div>
<div class="line"><span class="lineno">  226</span>        <a class="code hl_function" href="except_8cpp.html#a6b04d8d7658873fe2173bfbfed0a3b1b">throwIOException</a>(<span class="stringliteral">&quot;is a symlink -- skipped&quot;</span>);</div>
<div class="line"><span class="lineno">  227</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  228</span>    <span class="keywordflow">if</span> (S_ISDIR(st.st_mode))</div>
<div class="line"><span class="lineno">  229</span>        <a class="code hl_function" href="except_8cpp.html#a6b04d8d7658873fe2173bfbfed0a3b1b">throwIOException</a>(<span class="stringliteral">&quot;is a directory -- skipped&quot;</span>);</div>
<div class="line"><span class="lineno">  230</span>    <span class="keywordflow">if</span> (!(S_ISREG(st.st_mode)))</div>
<div class="line"><span class="lineno">  231</span>        <a class="code hl_function" href="except_8cpp.html#a6b04d8d7658873fe2173bfbfed0a3b1b">throwIOException</a>(<span class="stringliteral">&quot;not a regular file -- skipped&quot;</span>);</div>
<div class="line"><span class="lineno">  232</span><span class="preprocessor">#if defined(__unix__)</span></div>
<div class="line"><span class="lineno">  233</span>    <span class="comment">// no special bits may be set</span></div>
<div class="line"><span class="lineno">  234</span>    <span class="keywordflow">if</span> ((st.st_mode &amp; (S_ISUID | S_ISGID | S_ISVTX)) != 0)</div>
<div class="line"><span class="lineno">  235</span>        <a class="code hl_function" href="except_8cpp.html#a6b04d8d7658873fe2173bfbfed0a3b1b">throwIOException</a>(<span class="stringliteral">&quot;file has special permissions -- skipped&quot;</span>);</div>
<div class="line"><span class="lineno">  236</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  237</span>    <span class="keywordflow">if</span> (st.st_size &lt;= 0)</div>
<div class="line"><span class="lineno">  238</span>        <a class="code hl_function" href="except_8cpp.html#a6b04d8d7658873fe2173bfbfed0a3b1b">throwIOException</a>(<span class="stringliteral">&quot;empty file -- skipped&quot;</span>);</div>
<div class="line"><span class="lineno">  239</span>    <span class="keywordflow">if</span> (st.st_size &lt; 512)</div>
<div class="line"><span class="lineno">  240</span>        <a class="code hl_function" href="except_8cpp.html#a6b04d8d7658873fe2173bfbfed0a3b1b">throwIOException</a>(<span class="stringliteral">&quot;file is too small -- skipped&quot;</span>);</div>
<div class="line"><span class="lineno">  241</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="util_8h.html#ad55181add5f2758a5f49cf106faef962">mem_size_valid_bytes</a>(st.st_size))</div>
<div class="line"><span class="lineno">  242</span>        <a class="code hl_function" href="except_8cpp.html#a6b04d8d7658873fe2173bfbfed0a3b1b">throwIOException</a>(<span class="stringliteral">&quot;file is too large -- skipped&quot;</span>);</div>
<div class="line"><span class="lineno">  243</span>    <span class="keywordflow">if</span> ((st.st_mode &amp; S_IWUSR) == 0) {</div>
<div class="line"><span class="lineno">  244</span>        <span class="keywordtype">bool</span> skip = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  245</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;output_name)</div>
<div class="line"><span class="lineno">  246</span>            skip = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  247</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;to_stdout)</div>
<div class="line"><span class="lineno">  248</span>            skip = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  249</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;backup)</div>
<div class="line"><span class="lineno">  250</span>            skip = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  251</span>        <span class="keywordflow">if</span> (skip)</div>
<div class="line"><span class="lineno">  252</span>            <a class="code hl_function" href="except_8cpp.html#a6b04d8d7658873fe2173bfbfed0a3b1b">throwIOException</a>(<span class="stringliteral">&quot;file is write protected -- skipped&quot;</span>);</div>
<div class="line"><span class="lineno">  253</span>    }</div>
<div class="line"><span class="lineno">  254</span> </div>
<div class="line"><span class="lineno">  255</span>    <span class="comment">// open input file</span></div>
<div class="line"><span class="lineno">  256</span>    <a class="code hl_class" href="classInputFile.html">InputFile</a> fi;</div>
<div class="line"><span class="lineno">  257</span>    fi.<a class="code hl_function" href="classInputFile.html#a78a66fc063b1267d37b2d1e02f20003e">sopen</a>(iname, <a class="code hl_function" href="namespaceanonymous__namespace_02work_8cpp_03.html#ae97e4e584fe3a555d7b30bbd3d23210e">get_open_flags</a>(<a class="code hl_enumvalue" href="namespaceanonymous__namespace_02work_8cpp_03.html#a24868f7d224d8ecb7d81085d4f1ddb11a1e9a10b3192119ab06757cc16fd4fc7c">RO_MUST_EXIST</a>), <a class="code hl_define" href="work_8cpp.html#aaef4d3baa581a3da6ffc6f2f7780e7ac">SH_DENYWR</a>);</div>
<div class="line"><span class="lineno">  258</span> </div>
<div class="line"><span class="lineno">  259</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;preserve_timestamp) {</div>
<div class="line"><span class="lineno">  260</span><span class="preprocessor">#if USE_SETFILETIME</span></div>
<div class="line"><span class="lineno">  261</span>        <span class="keywordflow">if</span> (GetFileTime((HANDLE) _get_osfhandle(fi.<a class="code hl_function" href="classFileBase.html#ac24bcc9c4aa5052ddf9b94672b6fd48e">getFd</a>()), <span class="keyword">nullptr</span>, &amp;xst.ft_atime,</div>
<div class="line"><span class="lineno">  262</span>                        &amp;xst.ft_mtime) == 0)</div>
<div class="line"><span class="lineno">  263</span>            <a class="code hl_function" href="except_8cpp.html#a6b04d8d7658873fe2173bfbfed0a3b1b">throwIOException</a>(<span class="stringliteral">&quot;cannot determine file timestamp&quot;</span>);</div>
<div class="line"><span class="lineno">  264</span><span class="preprocessor">#elif USE_FTIME</span></div>
<div class="line"><span class="lineno">  265</span>        <span class="keywordflow">if</span> (getftime(fi.<a class="code hl_function" href="classFileBase.html#ac24bcc9c4aa5052ddf9b94672b6fd48e">getFd</a>(), &amp;xst.ft_ftime) != 0)</div>
<div class="line"><span class="lineno">  266</span>            <a class="code hl_function" href="except_8cpp.html#a6b04d8d7658873fe2173bfbfed0a3b1b">throwIOException</a>(<span class="stringliteral">&quot;cannot determine file timestamp&quot;</span>);</div>
<div class="line"><span class="lineno">  267</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  268</span>    }</div>
<div class="line"><span class="lineno">  269</span> </div>
<div class="line"><span class="lineno">  270</span>    <span class="comment">// open output file</span></div>
<div class="line"><span class="lineno">  271</span>    <span class="comment">// NOTE: only use &quot;preserve_link&quot; if you really need it, e.g. it can fail</span></div>
<div class="line"><span class="lineno">  272</span>    <span class="comment">//   with ETXTBSY and other unexpected errors; renaming files is much safer</span></div>
<div class="line"><span class="lineno">  273</span>    <a class="code hl_class" href="classOutputFile.html">OutputFile</a> fo;</div>
<div class="line"><span class="lineno">  274</span>    <span class="keywordtype">bool</span> preserve_link = <a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;preserve_link;</div>
<div class="line"><span class="lineno">  275</span>    <span class="keywordtype">bool</span> copy_timestamp_only = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  276</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;cmd == <a class="code hl_enumvalue" href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a87eabf5bdd0bf150006b8a1c9ca5ec86">CMD_COMPRESS</a> || <a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;cmd == <a class="code hl_enumvalue" href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a4dde2c8677197d9491e8db5ad4e6c1f3">CMD_DECOMPRESS</a>) {</div>
<div class="line"><span class="lineno">  277</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;to_stdout) {</div>
<div class="line"><span class="lineno">  278</span>            preserve_link = <span class="keyword">false</span>; <span class="comment">// not needed</span></div>
<div class="line"><span class="lineno">  279</span>            <span class="keywordflow">if</span> (!fo.<a class="code hl_function" href="classOutputFile.html#a02cf6b0b957ccb50ae5658b3daefdf9f">openStdout</a>(1, <a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;force ? <span class="keyword">true</span> : <span class="keyword">false</span>))</div>
<div class="line"><span class="lineno">  280</span>                <a class="code hl_function" href="except_8cpp.html#a6b04d8d7658873fe2173bfbfed0a3b1b">throwIOException</a>(<span class="stringliteral">&quot;data not written to a terminal; Use &#39;-f&#39; to force.&quot;</span>);</div>
<div class="line"><span class="lineno">  281</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  282</span>            <span class="keywordtype">char</span> tname[ACC_FN_PATH_MAX + 1];</div>
<div class="line"><span class="lineno">  283</span>            <span class="keywordflow">if</span> (<a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;output_name) {</div>
<div class="line"><span class="lineno">  284</span>                <a class="code hl_function" href="snprintf_8h.html#ad78f94ea2a472d48ab6ea8e50529ba32">strcpy</a>(tname, <a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;output_name);</div>
<div class="line"><span class="lineno">  285</span>                <span class="keywordflow">if</span> ((<a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;force_overwrite || <a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;force &gt;= 2) &amp;&amp; !preserve_link)</div>
<div class="line"><span class="lineno">  286</span>                    (void) <a class="code hl_function" href="classFileBase.html#a58f395d46f5df0c5c10c88f0f5b89924">FileBase::unlink_noexcept</a>(tname); <span class="comment">// IGNORE_ERROR</span></div>
<div class="line"><span class="lineno">  287</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  288</span>                <span class="keywordflow">if</span> (st.st_nlink &lt; 2)</div>
<div class="line"><span class="lineno">  289</span>                    preserve_link = <span class="keyword">false</span>; <span class="comment">// not needed</span></div>
<div class="line"><span class="lineno">  290</span>                <span class="keywordflow">if</span> (!<a class="code hl_function" href="util_8cpp.html#afd535abdda123db1d1b691b588917162">maketempname</a>(tname, <span class="keyword">sizeof</span>(tname), iname, <span class="stringliteral">&quot;.upx&quot;</span>))</div>
<div class="line"><span class="lineno">  291</span>                    <a class="code hl_function" href="except_8cpp.html#a6b04d8d7658873fe2173bfbfed0a3b1b">throwIOException</a>(<span class="stringliteral">&quot;could not create a temporary file name&quot;</span>);</div>
<div class="line"><span class="lineno">  292</span>            }</div>
<div class="line"><span class="lineno">  293</span>            <span class="keywordtype">int</span> flags = <a class="code hl_function" href="namespaceanonymous__namespace_02work_8cpp_03.html#ae97e4e584fe3a555d7b30bbd3d23210e">get_open_flags</a>(<a class="code hl_enumvalue" href="namespaceanonymous__namespace_02work_8cpp_03.html#a24868f7d224d8ecb7d81085d4f1ddb11ad437166ef201a2113cf054e86aef6da8">WO_MUST_CREATE</a>); <span class="comment">// don&#39;t overwrite files by default</span></div>
<div class="line"><span class="lineno">  294</span>            <span class="keywordflow">if</span> (<a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;output_name &amp;&amp; preserve_link) {</div>
<div class="line"><span class="lineno">  295</span>                flags = <a class="code hl_function" href="namespaceanonymous__namespace_02work_8cpp_03.html#ae97e4e584fe3a555d7b30bbd3d23210e">get_open_flags</a>(<a class="code hl_enumvalue" href="namespaceanonymous__namespace_02work_8cpp_03.html#a24868f7d224d8ecb7d81085d4f1ddb11aaa89720d300f9a7f15f245bf280b6e0f">WO_CREATE_OR_TRUNCATE</a>);</div>
<div class="line"><span class="lineno">  296</span><span class="preprocessor">#if HAVE_LSTAT</span></div>
<div class="line"><span class="lineno">  297</span>                <span class="keyword">struct </span>stat ost = {};</div>
<div class="line"><span class="lineno">  298</span>                <span class="keywordtype">int</span> r = lstat(tname, &amp;ost);</div>
<div class="line"><span class="lineno">  299</span>                <span class="keywordflow">if</span> (r == 0 &amp;&amp; S_ISREG(ost.st_mode)) {</div>
<div class="line"><span class="lineno">  300</span>                    preserve_link = ost.st_nlink &gt;= 2;</div>
<div class="line"><span class="lineno">  301</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (r == 0 &amp;&amp; S_ISLNK(ost.st_mode)) {</div>
<div class="line"><span class="lineno">  302</span>                    <span class="comment">// output_name is a symlink (valid or dangling)</span></div>
<div class="line"><span class="lineno">  303</span>                    (void) <a class="code hl_function" href="classFileBase.html#a58f395d46f5df0c5c10c88f0f5b89924">FileBase::unlink_noexcept</a>(tname); <span class="comment">// IGNORE_ERROR</span></div>
<div class="line"><span class="lineno">  304</span>                    preserve_link = <span class="keyword">false</span>;                   <span class="comment">// not needed</span></div>
<div class="line"><span class="lineno">  305</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  306</span>                    preserve_link = <span class="keyword">false</span>; <span class="comment">// not needed</span></div>
<div class="line"><span class="lineno">  307</span>                }</div>
<div class="line"><span class="lineno">  308</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  309</span>                <span class="keywordflow">if</span> (preserve_link) {</div>
<div class="line"><span class="lineno">  310</span>                    flags = <a class="code hl_function" href="namespaceanonymous__namespace_02work_8cpp_03.html#ae97e4e584fe3a555d7b30bbd3d23210e">get_open_flags</a>(<a class="code hl_enumvalue" href="namespaceanonymous__namespace_02work_8cpp_03.html#a24868f7d224d8ecb7d81085d4f1ddb11aabbfb9a542e05fba9a7fab7108800267">WO_MUST_EXIST_TRUNCATE</a>);</div>
<div class="line"><span class="lineno">  311</span>                    copy_timestamp_only = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  312</span>                }</div>
<div class="line"><span class="lineno">  313</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;force_overwrite || <a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;force) {</div>
<div class="line"><span class="lineno">  314</span>                flags = <a class="code hl_function" href="namespaceanonymous__namespace_02work_8cpp_03.html#ae97e4e584fe3a555d7b30bbd3d23210e">get_open_flags</a>(<a class="code hl_enumvalue" href="namespaceanonymous__namespace_02work_8cpp_03.html#a24868f7d224d8ecb7d81085d4f1ddb11aaa89720d300f9a7f15f245bf280b6e0f">WO_CREATE_OR_TRUNCATE</a>);</div>
<div class="line"><span class="lineno">  315</span>            }</div>
<div class="line"><span class="lineno">  316</span>            <span class="keywordtype">int</span> shmode = <a class="code hl_define" href="work_8cpp.html#aaef4d3baa581a3da6ffc6f2f7780e7ac">SH_DENYWR</a>;</div>
<div class="line"><span class="lineno">  317</span><span class="preprocessor">#if (ACC_ARCH_M68K &amp;&amp; ACC_OS_TOS &amp;&amp; ACC_CC_GNUC) &amp;&amp; defined(__MINT__)</span></div>
<div class="line"><span class="lineno">  318</span>            <span class="comment">// TODO later: check current mintlib if this hack is still needed</span></div>
<div class="line"><span class="lineno">  319</span>            flags |= O_TRUNC;</div>
<div class="line"><span class="lineno">  320</span>            shmode = O_DENYRW;</div>
<div class="line"><span class="lineno">  321</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  322</span>            <span class="comment">// cannot rely on open() because of umask</span></div>
<div class="line"><span class="lineno">  323</span>            <span class="comment">// int omode = st.st_mode | 0600;</span></div>
<div class="line"><span class="lineno">  324</span>            <span class="keywordtype">int</span> omode = <a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;preserve_mode ? 0600 : 0666; <span class="comment">// affected by umask; only for O_CREAT</span></div>
<div class="line"><span class="lineno">  325</span>            fo.<a class="code hl_function" href="classOutputFile.html#a0d75cc5db3e35886b2bacf3dd5905b2e">sopen</a>(tname, flags, shmode, omode);</div>
<div class="line"><span class="lineno">  326</span>            <span class="comment">// open succeeded - now set oname[]</span></div>
<div class="line"><span class="lineno">  327</span>            <a class="code hl_function" href="snprintf_8h.html#ad78f94ea2a472d48ab6ea8e50529ba32">strcpy</a>(oname, tname);</div>
<div class="line"><span class="lineno">  328</span>        }</div>
<div class="line"><span class="lineno">  329</span>    }</div>
<div class="line"><span class="lineno">  330</span> </div>
<div class="line"><span class="lineno">  331</span>    <span class="comment">// handle command - actual work starts HERE</span></div>
<div class="line"><span class="lineno">  332</span>    <a class="code hl_class" href="classPackMaster.html">PackMaster</a> pm(&amp;fi, <a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>);</div>
<div class="line"><span class="lineno">  333</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;cmd == <a class="code hl_enumvalue" href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a87eabf5bdd0bf150006b8a1c9ca5ec86">CMD_COMPRESS</a>)</div>
<div class="line"><span class="lineno">  334</span>        pm.pack(&amp;fo);</div>
<div class="line"><span class="lineno">  335</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;cmd == <a class="code hl_enumvalue" href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a4dde2c8677197d9491e8db5ad4e6c1f3">CMD_DECOMPRESS</a>)</div>
<div class="line"><span class="lineno">  336</span>        pm.unpack(&amp;fo);</div>
<div class="line"><span class="lineno">  337</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;cmd == <a class="code hl_enumvalue" href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a12e11ac7c830ec6038306c9803cdd949">CMD_TEST</a>)</div>
<div class="line"><span class="lineno">  338</span>        pm.test();</div>
<div class="line"><span class="lineno">  339</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;cmd == <a class="code hl_enumvalue" href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a3e98c17356a41ea6840cd0241211d99d">CMD_LIST</a>)</div>
<div class="line"><span class="lineno">  340</span>        pm.list();</div>
<div class="line"><span class="lineno">  341</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;cmd == <a class="code hl_enumvalue" href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a1be0f2940b3c4867de69288c4438f27c">CMD_FILEINFO</a>)</div>
<div class="line"><span class="lineno">  342</span>        pm.fileInfo();</div>
<div class="line"><span class="lineno">  343</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  344</span>        <a class="code hl_function" href="except_8cpp.html#a57b532c382fd20e682bf0393b6d63050">throwInternalError</a>(<span class="stringliteral">&quot;invalid command&quot;</span>);</div>
<div class="line"><span class="lineno">  345</span> </div>
<div class="line"><span class="lineno">  346</span>    <span class="comment">// copy time stamp</span></div>
<div class="line"><span class="lineno">  347</span>    <span class="keywordflow">if</span> (oname[0] &amp;&amp; <a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;preserve_timestamp &amp;&amp; fo.<a class="code hl_function" href="classFileBase.html#a7ac53047ea0158b99c3c4fcedf579505">isOpen</a>())</div>
<div class="line"><span class="lineno">  348</span>        <a class="code hl_function" href="namespaceanonymous__namespace_02work_8cpp_03.html#a260445b322321a504b9aa2fb8f1e1929">set_fd_timestamp</a>(fo.<a class="code hl_function" href="classFileBase.html#ac24bcc9c4aa5052ddf9b94672b6fd48e">getFd</a>(), &amp;xst);</div>
<div class="line"><span class="lineno">  349</span> </div>
<div class="line"><span class="lineno">  350</span>    <span class="comment">// close files</span></div>
<div class="line"><span class="lineno">  351</span>    fi.<a class="code hl_function" href="classFileBase.html#ad1760af00c23be3c3dd2f9eda2f0c10d">closex</a>();</div>
<div class="line"><span class="lineno">  352</span>    fo.<a class="code hl_function" href="classFileBase.html#ad1760af00c23be3c3dd2f9eda2f0c10d">closex</a>();</div>
<div class="line"><span class="lineno">  353</span> </div>
<div class="line"><span class="lineno">  354</span>    <span class="comment">// rename or copy files</span></div>
<div class="line"><span class="lineno">  355</span>    <span class="keywordflow">if</span> (oname[0] &amp;&amp; !<a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;output_name) {</div>
<div class="line"><span class="lineno">  356</span>        <span class="comment">// both iname and oname do exist; rename oname to iname</span></div>
<div class="line"><span class="lineno">  357</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;backup) {</div>
<div class="line"><span class="lineno">  358</span>            <span class="keywordtype">char</span> bakname[ACC_FN_PATH_MAX + 1];</div>
<div class="line"><span class="lineno">  359</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="util_8cpp.html#a822ef1a8d7f44a14b9c655a2e456940b">makebakname</a>(bakname, <span class="keyword">sizeof</span>(bakname), iname))</div>
<div class="line"><span class="lineno">  360</span>                <a class="code hl_function" href="except_8cpp.html#a6b04d8d7658873fe2173bfbfed0a3b1b">throwIOException</a>(<span class="stringliteral">&quot;could not create a backup file name&quot;</span>);</div>
<div class="line"><span class="lineno">  361</span>            <span class="keywordflow">if</span> (preserve_link) {</div>
<div class="line"><span class="lineno">  362</span>                <a class="code hl_function" href="namespaceanonymous__namespace_02work_8cpp_03.html#ae94d33f51eb588e4e22b848dfc45db9a">copy_file_contents</a>(iname, bakname, <a class="code hl_enumvalue" href="namespaceanonymous__namespace_02work_8cpp_03.html#a24868f7d224d8ecb7d81085d4f1ddb11ad437166ef201a2113cf054e86aef6da8">WO_MUST_CREATE</a>, &amp;xst);</div>
<div class="line"><span class="lineno">  363</span>                <a class="code hl_function" href="namespaceanonymous__namespace_02work_8cpp_03.html#a79af7be9577bd63d4f2a31e09c4b5640">copy_file_attributes</a>(&amp;xst, bakname, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  364</span>                <span class="keyword">const</span> XStat *xstamp = <a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;preserve_timestamp ? &amp;xst : <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  365</span>                <a class="code hl_function" href="namespaceanonymous__namespace_02work_8cpp_03.html#ae94d33f51eb588e4e22b848dfc45db9a">copy_file_contents</a>(oname, iname, <a class="code hl_enumvalue" href="namespaceanonymous__namespace_02work_8cpp_03.html#a24868f7d224d8ecb7d81085d4f1ddb11aabbfb9a542e05fba9a7fab7108800267">WO_MUST_EXIST_TRUNCATE</a>, xstamp);</div>
<div class="line"><span class="lineno">  366</span>                <a class="code hl_function" href="classFileBase.html#adb3ef7200b8bc7cb31900c6c56f223f7">FileBase::unlink</a>(oname);</div>
<div class="line"><span class="lineno">  367</span>                copy_timestamp_only = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  368</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  369</span>                <a class="code hl_function" href="classFileBase.html#aca8751eb666a6202c1e29d052fc9f4b2">FileBase::rename</a>(iname, bakname);</div>
<div class="line"><span class="lineno">  370</span>                <a class="code hl_function" href="classFileBase.html#aca8751eb666a6202c1e29d052fc9f4b2">FileBase::rename</a>(oname, iname);</div>
<div class="line"><span class="lineno">  371</span>            }</div>
<div class="line"><span class="lineno">  372</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (preserve_link) {</div>
<div class="line"><span class="lineno">  373</span>            <span class="keyword">const</span> XStat *xstamp = <a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;preserve_timestamp ? &amp;xst : <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  374</span>            <a class="code hl_function" href="namespaceanonymous__namespace_02work_8cpp_03.html#ae94d33f51eb588e4e22b848dfc45db9a">copy_file_contents</a>(oname, iname, <a class="code hl_enumvalue" href="namespaceanonymous__namespace_02work_8cpp_03.html#a24868f7d224d8ecb7d81085d4f1ddb11aabbfb9a542e05fba9a7fab7108800267">WO_MUST_EXIST_TRUNCATE</a>, xstamp);</div>
<div class="line"><span class="lineno">  375</span>            <a class="code hl_function" href="classFileBase.html#adb3ef7200b8bc7cb31900c6c56f223f7">FileBase::unlink</a>(oname);</div>
<div class="line"><span class="lineno">  376</span>            copy_timestamp_only = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  377</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  378</span>            <a class="code hl_function" href="classFileBase.html#adb3ef7200b8bc7cb31900c6c56f223f7">FileBase::unlink</a>(iname);</div>
<div class="line"><span class="lineno">  379</span>            <a class="code hl_function" href="classFileBase.html#aca8751eb666a6202c1e29d052fc9f4b2">FileBase::rename</a>(oname, iname);</div>
<div class="line"><span class="lineno">  380</span>        }</div>
<div class="line"><span class="lineno">  381</span>        <span class="comment">// now iname is the new packed/unpacked file and oname does not exist any longer</span></div>
<div class="line"><span class="lineno">  382</span>    }</div>
<div class="line"><span class="lineno">  383</span> </div>
<div class="line"><span class="lineno">  384</span>    <span class="comment">// copy file attributes</span></div>
<div class="line"><span class="lineno">  385</span>    <span class="keywordflow">if</span> (oname[0]) {</div>
<div class="line"><span class="lineno">  386</span>        oname[0] = 0; <span class="comment">// done with oname</span></div>
<div class="line"><span class="lineno">  387</span>        <span class="keyword">const</span> <span class="keywordtype">char</span> *name = <a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;output_name ? <a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;output_name : iname;</div>
<div class="line"><span class="lineno">  388</span>        <span class="keywordflow">if</span> (copy_timestamp_only)</div>
<div class="line"><span class="lineno">  389</span>            <a class="code hl_function" href="namespaceanonymous__namespace_02work_8cpp_03.html#a79af7be9577bd63d4f2a31e09c4b5640">copy_file_attributes</a>(&amp;xst, name, <span class="keyword">false</span>, <span class="keyword">false</span>, <a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;preserve_timestamp);</div>
<div class="line"><span class="lineno">  390</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  391</span>            <a class="code hl_function" href="namespaceanonymous__namespace_02work_8cpp_03.html#a79af7be9577bd63d4f2a31e09c4b5640">copy_file_attributes</a>(&amp;xst, name, <a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;preserve_mode, <a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;preserve_ownership,</div>
<div class="line"><span class="lineno">  392</span>                                 <a class="code hl_define" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>-&gt;preserve_timestamp);</div>
<div class="line"><span class="lineno">  393</span>    }</div>
<div class="line"><span class="lineno">  394</span> </div>
<div class="line"><span class="lineno">  395</span>    <a class="code hl_function" href="classUiPacker.html#a71f8d303c88d9598edabbefd6abebca3">UiPacker::uiConfirmUpdate</a>();</div>
<div class="line"><span class="lineno">  396</span>}</div>
<div class="ttc" id="absd_8h_html_a03e689f378f643d16ea7537918528a48"><div class="ttname"><a href="bsd_8h.html#a03e689f378f643d16ea7537918528a48">ENOENT</a></div><div class="ttdeci">#define ENOENT</div><div class="ttdef"><b>Definition:</b> <a href="bsd_8h_source.html#l00120">bsd.h:120</a></div></div>
<div class="ttc" id="aclassFileBase_html_a58f395d46f5df0c5c10c88f0f5b89924"><div class="ttname"><a href="classFileBase.html#a58f395d46f5df0c5c10c88f0f5b89924">FileBase::unlink_noexcept</a></div><div class="ttdeci">static bool unlink_noexcept(const char *name) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="file_8cpp_source.html#l00056">file.cpp:56</a></div></div>
<div class="ttc" id="aclassFileBase_html_a7ac53047ea0158b99c3c4fcedf579505"><div class="ttname"><a href="classFileBase.html#a7ac53047ea0158b99c3c4fcedf579505">FileBase::isOpen</a></div><div class="ttdeci">bool isOpen() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="file_8h_source.html#l00042">file.h:42</a></div></div>
<div class="ttc" id="aclassFileBase_html_ac24bcc9c4aa5052ddf9b94672b6fd48e"><div class="ttname"><a href="classFileBase.html#ac24bcc9c4aa5052ddf9b94672b6fd48e">FileBase::getFd</a></div><div class="ttdeci">int getFd() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="file_8h_source.html#l00043">file.h:43</a></div></div>
<div class="ttc" id="aclassFileBase_html_aca8751eb666a6202c1e29d052fc9f4b2"><div class="ttname"><a href="classFileBase.html#aca8751eb666a6202c1e29d052fc9f4b2">FileBase::rename</a></div><div class="ttdeci">static void rename(const char *old_, const char *new_) may_throw</div><div class="ttdef"><b>Definition:</b> <a href="file_8cpp_source.html#l00047">file.cpp:47</a></div></div>
<div class="ttc" id="aclassFileBase_html_ad1760af00c23be3c3dd2f9eda2f0c10d"><div class="ttname"><a href="classFileBase.html#ad1760af00c23be3c3dd2f9eda2f0c10d">FileBase::closex</a></div><div class="ttdeci">void closex() may_throw</div><div class="ttdef"><b>Definition:</b> <a href="file_8cpp_source.html#l00123">file.cpp:123</a></div></div>
<div class="ttc" id="aclassFileBase_html_adb3ef7200b8bc7cb31900c6c56f223f7"><div class="ttname"><a href="classFileBase.html#adb3ef7200b8bc7cb31900c6c56f223f7">FileBase::unlink</a></div><div class="ttdeci">static void unlink(const char *name) may_throw</div><div class="ttdef"><b>Definition:</b> <a href="file_8cpp_source.html#l00066">file.cpp:66</a></div></div>
<div class="ttc" id="aclassFileNotFoundException_html"><div class="ttname"><a href="classFileNotFoundException.html">FileNotFoundException</a></div><div class="ttdef"><b>Definition:</b> <a href="except_8h_source.html#l00108">except.h:108</a></div></div>
<div class="ttc" id="aclassInputFile_html"><div class="ttname"><a href="classInputFile.html">InputFile</a></div><div class="ttdef"><b>Definition:</b> <a href="file_8h_source.html#l00076">file.h:76</a></div></div>
<div class="ttc" id="aclassInputFile_html_a78a66fc063b1267d37b2d1e02f20003e"><div class="ttname"><a href="classInputFile.html#a78a66fc063b1267d37b2d1e02f20003e">InputFile::sopen</a></div><div class="ttdeci">void sopen(const char *name, int flags, int shflags)</div><div class="ttdoc">InputFile.</div><div class="ttdef"><b>Definition:</b> <a href="file_8cpp_source.html#l00171">file.cpp:171</a></div></div>
<div class="ttc" id="aclassOutputFile_html"><div class="ttname"><a href="classOutputFile.html">OutputFile</a></div><div class="ttdef"><b>Definition:</b> <a href="file_8h_source.html#l00101">file.h:101</a></div></div>
<div class="ttc" id="aclassOutputFile_html_a02cf6b0b957ccb50ae5658b3daefdf9f"><div class="ttname"><a href="classOutputFile.html#a02cf6b0b957ccb50ae5658b3daefdf9f">OutputFile::openStdout</a></div><div class="ttdeci">bool openStdout(int flags=0, bool force=false)</div><div class="ttdef"><b>Definition:</b> <a href="file_8cpp_source.html#l00257">file.cpp:257</a></div></div>
<div class="ttc" id="aclassOutputFile_html_a0d75cc5db3e35886b2bacf3dd5905b2e"><div class="ttname"><a href="classOutputFile.html#a0d75cc5db3e35886b2bacf3dd5905b2e">OutputFile::sopen</a></div><div class="ttdeci">void sopen(const char *name, int flags, int shflags, int mode)</div><div class="ttdoc">OutputFile.</div><div class="ttdef"><b>Definition:</b> <a href="file_8cpp_source.html#l00235">file.cpp:235</a></div></div>
<div class="ttc" id="aclassPackMaster_html"><div class="ttname"><a href="classPackMaster.html">PackMaster</a></div><div class="ttdoc">dispatch to a concrete subclass of class PackerBase; see work.cpp</div><div class="ttdef"><b>Definition:</b> <a href="packmast_8h_source.html#l00038">packmast.h:38</a></div></div>
<div class="ttc" id="aclassUiPacker_html_a71f8d303c88d9598edabbefd6abebca3"><div class="ttname"><a href="classUiPacker.html#a71f8d303c88d9598edabbefd6abebca3">UiPacker::uiConfirmUpdate</a></div><div class="ttdeci">static void uiConfirmUpdate()</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l00633">ui.cpp:633</a></div></div>
<div class="ttc" id="aexcept_8cpp_html_a57b532c382fd20e682bf0393b6d63050"><div class="ttname"><a href="except_8cpp.html#a57b532c382fd20e682bf0393b6d63050">throwInternalError</a></div><div class="ttdeci">void throwInternalError(const char *msg)</div><div class="ttdoc">other</div><div class="ttdef"><b>Definition:</b> <a href="except_8cpp_source.html#l00128">except.cpp:128</a></div></div>
<div class="ttc" id="aexcept_8cpp_html_a6b04d8d7658873fe2173bfbfed0a3b1b"><div class="ttname"><a href="except_8cpp.html#a6b04d8d7658873fe2173bfbfed0a3b1b">throwIOException</a></div><div class="ttdeci">void throwIOException(const char *msg, int e)</div><div class="ttdef"><b>Definition:</b> <a href="except_8cpp_source.html#l00138">except.cpp:138</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02work_8cpp_03_html_a24868f7d224d8ecb7d81085d4f1ddb11a1e9a10b3192119ab06757cc16fd4fc7c"><div class="ttname"><a href="namespaceanonymous__namespace_02work_8cpp_03.html#a24868f7d224d8ecb7d81085d4f1ddb11a1e9a10b3192119ab06757cc16fd4fc7c">anonymous_namespace{work.cpp}::RO_MUST_EXIST</a></div><div class="ttdeci">@ RO_MUST_EXIST</div><div class="ttdef"><b>Definition:</b> <a href="work_8cpp_source.html#l00086">work.cpp:86</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02work_8cpp_03_html_a24868f7d224d8ecb7d81085d4f1ddb11aaa89720d300f9a7f15f245bf280b6e0f"><div class="ttname"><a href="namespaceanonymous__namespace_02work_8cpp_03.html#a24868f7d224d8ecb7d81085d4f1ddb11aaa89720d300f9a7f15f245bf280b6e0f">anonymous_namespace{work.cpp}::WO_CREATE_OR_TRUNCATE</a></div><div class="ttdeci">@ WO_CREATE_OR_TRUNCATE</div><div class="ttdef"><b>Definition:</b> <a href="work_8cpp_source.html#l00086">work.cpp:86</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02work_8cpp_03_html_a24868f7d224d8ecb7d81085d4f1ddb11aabbfb9a542e05fba9a7fab7108800267"><div class="ttname"><a href="namespaceanonymous__namespace_02work_8cpp_03.html#a24868f7d224d8ecb7d81085d4f1ddb11aabbfb9a542e05fba9a7fab7108800267">anonymous_namespace{work.cpp}::WO_MUST_EXIST_TRUNCATE</a></div><div class="ttdeci">@ WO_MUST_EXIST_TRUNCATE</div><div class="ttdef"><b>Definition:</b> <a href="work_8cpp_source.html#l00086">work.cpp:86</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02work_8cpp_03_html_a24868f7d224d8ecb7d81085d4f1ddb11ad437166ef201a2113cf054e86aef6da8"><div class="ttname"><a href="namespaceanonymous__namespace_02work_8cpp_03.html#a24868f7d224d8ecb7d81085d4f1ddb11ad437166ef201a2113cf054e86aef6da8">anonymous_namespace{work.cpp}::WO_MUST_CREATE</a></div><div class="ttdeci">@ WO_MUST_CREATE</div><div class="ttdef"><b>Definition:</b> <a href="work_8cpp_source.html#l00086">work.cpp:86</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02work_8cpp_03_html_a260445b322321a504b9aa2fb8f1e1929"><div class="ttname"><a href="namespaceanonymous__namespace_02work_8cpp_03.html#a260445b322321a504b9aa2fb8f1e1929">anonymous_namespace{work.cpp}::set_fd_timestamp</a></div><div class="ttdeci">static void set_fd_timestamp(int fd, const XStat *xst) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="work_8cpp_source.html#l00101">work.cpp:101</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02work_8cpp_03_html_a79af7be9577bd63d4f2a31e09c4b5640"><div class="ttname"><a href="namespaceanonymous__namespace_02work_8cpp_03.html#a79af7be9577bd63d4f2a31e09c4b5640">anonymous_namespace{work.cpp}::copy_file_attributes</a></div><div class="ttdeci">static void copy_file_attributes(const XStat *xst, const char *oname, bool preserve_mode, bool preserve_ownership, bool preserve_timestamp) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="work_8cpp_source.html#l00145">work.cpp:145</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02work_8cpp_03_html_ae94d33f51eb588e4e22b848dfc45db9a"><div class="ttname"><a href="namespaceanonymous__namespace_02work_8cpp_03.html#ae94d33f51eb588e4e22b848dfc45db9a">anonymous_namespace{work.cpp}::copy_file_contents</a></div><div class="ttdeci">static void copy_file_contents(const char *iname, const char *oname, OpenMode om, const XStat *oname_timestamp) may_throw</div><div class="ttdef"><b>Definition:</b> <a href="work_8cpp_source.html#l00121">work.cpp:121</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02work_8cpp_03_html_ae97e4e584fe3a555d7b30bbd3d23210e"><div class="ttname"><a href="namespaceanonymous__namespace_02work_8cpp_03.html#ae97e4e584fe3a555d7b30bbd3d23210e">anonymous_namespace{work.cpp}::get_open_flags</a></div><div class="ttdeci">static constexpr int get_open_flags(OpenMode om) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="work_8cpp_source.html#l00088">work.cpp:88</a></div></div>
<div class="ttc" id="asnprintf_8h_html_ad78f94ea2a472d48ab6ea8e50529ba32"><div class="ttname"><a href="snprintf_8h.html#ad78f94ea2a472d48ab6ea8e50529ba32">strcpy</a></div><div class="ttdeci">forceinline uchar * strcpy(uchar *s1, const uchar *s2) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="snprintf_8h_source.html#l00073">snprintf.h:73</a></div></div>
<div class="ttc" id="autil_8cpp_html_a822ef1a8d7f44a14b9c655a2e456940b"><div class="ttname"><a href="util_8cpp.html#a822ef1a8d7f44a14b9c655a2e456940b">makebakname</a></div><div class="ttdeci">bool makebakname(char *ofilename, size_t size, const char *ifilename, bool force)</div><div class="ttdef"><b>Definition:</b> <a href="util_8cpp_source.html#l00959">util.cpp:959</a></div></div>
<div class="ttc" id="autil_8cpp_html_afd535abdda123db1d1b691b588917162"><div class="ttname"><a href="util_8cpp.html#afd535abdda123db1d1b691b588917162">maketempname</a></div><div class="ttdeci">bool maketempname(char *ofilename, size_t size, const char *ifilename, const char *ext, bool force)</div><div class="ttdef"><b>Definition:</b> <a href="util_8cpp_source.html#l00929">util.cpp:929</a></div></div>
<div class="ttc" id="autil_8h_html_ad55181add5f2758a5f49cf106faef962"><div class="ttname"><a href="util_8h.html#ad55181add5f2758a5f49cf106faef962">mem_size_valid_bytes</a></div><div class="ttdeci">bool mem_size_valid_bytes(upx_uint64_t bytes) noexcept</div><div class="ttdoc">upx_rsize_t and mem_size: assert sane memory buffer sizes to protect against integer overflows and ma...</div><div class="ttdef"><b>Definition:</b> <a href="util_8h_source.html#l00036">util.h:36</a></div></div>
<div class="ttc" id="awork_8cpp_html_aaef4d3baa581a3da6ffc6f2f7780e7ac"><div class="ttname"><a href="work_8cpp.html#aaef4d3baa581a3da6ffc6f2f7780e7ac">SH_DENYWR</a></div><div class="ttdeci">#define SH_DENYWR</div><div class="ttdef"><b>Definition:</b> <a href="work_8cpp_source.html#l00064">work.cpp:64</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classFileBase.html#ad1760af00c23be3c3dd2f9eda2f0c10d">FileBase::closex()</a>, <a class="el" href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a87eabf5bdd0bf150006b8a1c9ca5ec86">CMD_COMPRESS</a>, <a class="el" href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a4dde2c8677197d9491e8db5ad4e6c1f3">CMD_DECOMPRESS</a>, <a class="el" href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a1be0f2940b3c4867de69288c4438f27c">CMD_FILEINFO</a>, <a class="el" href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a3e98c17356a41ea6840cd0241211d99d">CMD_LIST</a>, <a class="el" href="options_8h.html#a99fb83031ce9923c84392b4e92f956b5a12e11ac7c830ec6038306c9803cdd949">CMD_TEST</a>, <a class="el" href="namespaceanonymous__namespace_02work_8cpp_03.html#a79af7be9577bd63d4f2a31e09c4b5640">anonymous_namespace{work.cpp}::copy_file_attributes()</a>, <a class="el" href="namespaceanonymous__namespace_02work_8cpp_03.html#ae94d33f51eb588e4e22b848dfc45db9a">anonymous_namespace{work.cpp}::copy_file_contents()</a>, <a class="el" href="bsd_8h.html#a03e689f378f643d16ea7537918528a48">ENOENT</a>, <a class="el" href="classPackMaster.html#a5098f0b19583e56fc898dbcfce0c78aa">PackMaster::fileInfo()</a>, <a class="el" href="namespaceanonymous__namespace_02work_8cpp_03.html#ae97e4e584fe3a555d7b30bbd3d23210e">anonymous_namespace{work.cpp}::get_open_flags()</a>, <a class="el" href="classFileBase.html#ac24bcc9c4aa5052ddf9b94672b6fd48e">FileBase::getFd()</a>, <a class="el" href="classFileBase.html#a7ac53047ea0158b99c3c4fcedf579505">FileBase::isOpen()</a>, <a class="el" href="classPackMaster.html#a66204c58becefb592e13c0f868cead0a">PackMaster::list()</a>, <a class="el" href="util_8cpp.html#a822ef1a8d7f44a14b9c655a2e456940b">makebakname()</a>, <a class="el" href="util_8cpp.html#afd535abdda123db1d1b691b588917162">maketempname()</a>, <a class="el" href="util_8h.html#ad55181add5f2758a5f49cf106faef962">mem_size_valid_bytes()</a>, <a class="el" href="classOutputFile.html#a02cf6b0b957ccb50ae5658b3daefdf9f">OutputFile::openStdout()</a>, <a class="el" href="options_8cpp.html#a887b9edd7a68b4cde1de1f0d7ac1d6eb">opt</a>, <a class="el" href="classPackMaster.html#a223a62e50f79d5f209271caad841e5f4">PackMaster::pack()</a>, <a class="el" href="classFileBase.html#aca8751eb666a6202c1e29d052fc9f4b2">FileBase::rename()</a>, <a class="el" href="namespaceanonymous__namespace_02work_8cpp_03.html#a24868f7d224d8ecb7d81085d4f1ddb11a1e9a10b3192119ab06757cc16fd4fc7c">anonymous_namespace{work.cpp}::RO_MUST_EXIST</a>, <a class="el" href="namespaceanonymous__namespace_02work_8cpp_03.html#a260445b322321a504b9aa2fb8f1e1929">anonymous_namespace{work.cpp}::set_fd_timestamp()</a>, <a class="el" href="work_8cpp.html#aaef4d3baa581a3da6ffc6f2f7780e7ac">SH_DENYWR</a>, <a class="el" href="classInputFile.html#a78a66fc063b1267d37b2d1e02f20003e">InputFile::sopen()</a>, <a class="el" href="classOutputFile.html#a0d75cc5db3e35886b2bacf3dd5905b2e">OutputFile::sopen()</a>, <a class="el" href="snprintf_8h.html#ad78f94ea2a472d48ab6ea8e50529ba32">strcpy()</a>, <a class="el" href="classPackMaster.html#aab20f18a17210949106304c0517f8472">PackMaster::test()</a>, <a class="el" href="except_8cpp.html#a57b532c382fd20e682bf0393b6d63050">throwInternalError()</a>, <a class="el" href="except_8cpp.html#a6b04d8d7658873fe2173bfbfed0a3b1b">throwIOException()</a>, <a class="el" href="classUiPacker.html#a71f8d303c88d9598edabbefd6abebca3">UiPacker::uiConfirmUpdate()</a>, <a class="el" href="classFileBase.html#adb3ef7200b8bc7cb31900c6c56f223f7">FileBase::unlink()</a>, <a class="el" href="classFileBase.html#a58f395d46f5df0c5c10c88f0f5b89924">FileBase::unlink_noexcept()</a>, <a class="el" href="classPackMaster.html#ab6d3e1bfceab7bbd80afb210808bdbe3">PackMaster::unpack()</a>, <a class="el" href="namespaceanonymous__namespace_02work_8cpp_03.html#a24868f7d224d8ecb7d81085d4f1ddb11aaa89720d300f9a7f15f245bf280b6e0f">anonymous_namespace{work.cpp}::WO_CREATE_OR_TRUNCATE</a>, <a class="el" href="namespaceanonymous__namespace_02work_8cpp_03.html#a24868f7d224d8ecb7d81085d4f1ddb11ad437166ef201a2113cf054e86aef6da8">anonymous_namespace{work.cpp}::WO_MUST_CREATE</a>, and <a class="el" href="namespaceanonymous__namespace_02work_8cpp_03.html#a24868f7d224d8ecb7d81085d4f1ddb11aabbfb9a542e05fba9a7fab7108800267">anonymous_namespace{work.cpp}::WO_MUST_EXIST_TRUNCATE</a>.</p>

<p class="reference">Referenced by <a class="el" href="conf_8h.html#a9ec6798d280944a40890ad8f08dbe964">do_files()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="work_8cpp_acb26fb37f44aef462017c0319a0c7b51_cgraph.png" border="0" usemap="#awork_8cpp_acb26fb37f44aef462017c0319a0c7b51_cgraph" alt=""/></div>
<map name="awork_8cpp_acb26fb37f44aef462017c0319a0c7b51_cgraph" id="awork_8cpp_acb26fb37f44aef462017c0319a0c7b51_cgraph">
<area shape="rect" title="process one file" alt="" coords="5,993,101,1018"/>
<area shape="rect" href="classFileBase.html#ad1760af00c23be3c3dd2f9eda2f0c10d" title=" " alt="" coords="1147,798,1274,823"/>
<area shape="rect" href="classFileBase.html#a7ac53047ea0158b99c3c4fcedf579505" title=" " alt="" coords="1567,293,1697,318"/>
<area shape="rect" href="except_8cpp.html#a6b04d8d7658873fe2173bfbfed0a3b1b" title=" " alt="" coords="1357,749,1494,774"/>
<area shape="rect" href="namespaceanonymous__namespace_02work_8cpp_03.html#a79af7be9577bd63d4f2a31e09c4b5640" title=" " alt="" coords="157,411,337,466"/>
<area shape="rect" href="namespaceanonymous__namespace_02work_8cpp_03.html#ae94d33f51eb588e4e22b848dfc45db9a" title=" " alt="" coords="399,295,579,350"/>
<area shape="rect" href="namespaceanonymous__namespace_02work_8cpp_03.html#ae97e4e584fe3a555d7b30bbd3d23210e" title=" " alt="" coords="649,43,855,83"/>
<area shape="rect" href="classFileBase.html#ac24bcc9c4aa5052ddf9b94672b6fd48e" title=" " alt="" coords="691,107,813,133"/>
<area shape="rect" href="except_8cpp.html#a57b532c382fd20e682bf0393b6d63050" title="other" alt="" coords="1355,546,1495,571"/>
<area shape="rect" href="namespaceanonymous__namespace_02work_8cpp_03.html#a260445b322321a504b9aa2fb8f1e1929" title=" " alt="" coords="662,513,842,567"/>
<area shape="rect" href="classInputFile.html#a78a66fc063b1267d37b2d1e02f20003e" title="InputFile." alt="" coords="941,749,1067,774"/>
<area shape="rect" href="classOutputFile.html#a0d75cc5db3e35886b2bacf3dd5905b2e" title="OutputFile." alt="" coords="936,798,1072,823"/>
<area shape="rect" href="classPackMaster.html#a5098f0b19583e56fc898dbcfce0c78aa" title=" " alt="" coords="414,741,565,766"/>
<area shape="rect" href="classPackMaster.html#a66204c58becefb592e13c0f868cead0a" title=" " alt="" coords="185,841,310,866"/>
<area shape="rect" href="util_8cpp.html#a822ef1a8d7f44a14b9c655a2e456940b" title=" " alt="" coords="188,1243,307,1269"/>
<area shape="rect" href="snprintf_8h.html#ad78f94ea2a472d48ab6ea8e50529ba32" title=" " alt="" coords="458,1366,521,1391"/>
<area shape="rect" href="util_8cpp.html#afd535abdda123db1d1b691b588917162" title=" " alt="" coords="183,1145,312,1170"/>
<area shape="rect" href="util_8h.html#ad55181add5f2758a5f49cf106faef962" title="upx_rsize_t and mem_size: assert sane memory buffer sizes to protect against integer overflows and ma..." alt="" coords="162,1194,333,1219"/>
<area shape="rect" href="classOutputFile.html#a02cf6b0b957ccb50ae5658b3daefdf9f" title=" " alt="" coords="919,1043,1089,1069"/>
<area shape="rect" href="classPackMaster.html#a223a62e50f79d5f209271caad841e5f4" title="delegation from work.cpp" alt="" coords="179,1293,315,1318"/>
<area shape="rect" href="classFileBase.html#aca8751eb666a6202c1e29d052fc9f4b2" title=" " alt="" coords="1143,1282,1278,1307"/>
<area shape="rect" href="classPackMaster.html#aab20f18a17210949106304c0517f8472" title=" " alt="" coords="182,791,313,817"/>
<area shape="rect" href="classUiPacker.html#a71f8d303c88d9598edabbefd6abebca3" title=" " alt="" coords="149,1445,345,1470"/>
<area shape="rect" href="classFileBase.html#adb3ef7200b8bc7cb31900c6c56f223f7" title=" " alt="" coords="185,1546,310,1571"/>
<area shape="rect" href="classFileBase.html#a58f395d46f5df0c5c10c88f0f5b89924" title=" " alt="" coords="393,1495,585,1521"/>
<area shape="rect" href="classPackMaster.html#ab6d3e1bfceab7bbd80afb210808bdbe3" title=" " alt="" coords="171,1595,323,1621"/>
<area shape="rect" href="classFileBase.html#a46505d107430f708ce7b63f79c452b4d" title=" " alt="" coords="1332,798,1519,823"/>
<area shape="rect" href="bsd_8h.html#ae152484c890a24e4d9b4980e7b965be0" title=" " alt="" coords="1604,1145,1660,1170"/>
<area shape="rect" href="classInputFile.html#ae6797787eefa57fdc7191461a47109f6" title=" " alt="" coords="947,242,1061,267"/>
<area shape="rect" href="classInputFile.html#aa76b4db751f0d4ad6c47e93fa676d4a9" title=" " alt="" coords="945,647,1063,673"/>
<area shape="rect" href="classOutputFile.html#a8b1b934391e5d959387552e48a5fb4b4" title=" " alt="" coords="940,158,1068,183"/>
<area shape="rect" href="classOutputFile.html#aa8beb793956b90404c940c5821936718" title=" " alt="" coords="687,259,817,285"/>
<area shape="rect" href="util_8cpp.html#aa054bbcac51cef77258c20fa0321b320" title=" " alt="" coords="1587,141,1677,166"/>
<area shape="rect" href="membuffer_8h.html#a8bc8e23a965fc63e336d6158814f5751" title=" " alt="" coords="1166,469,1255,494"/>
<area shape="rect" href="classFileBase.html#a79cb685c1981c280797ddafc4ea9462d" title=" " alt="" coords="1153,343,1269,369"/>
<area shape="rect" href="util_8h.html#a0d276ff04b9e9afee894e5e67ff3526d" title=" " alt="" coords="1357,191,1493,217"/>
<area shape="rect" href="classFileBase.html#aaa2f266ecd4e53d494ea53c1d94dd2df" title=" " alt="" coords="1137,749,1284,774"/>
<area shape="rect" href="classOutputFile.html#a7efdb4c39ac6ba0dfbc4a512fcfc1331" title=" " alt="" coords="937,445,1071,470"/>
<area shape="rect" href="conf_8h.html#a27ba2be54b8bb96f2c06736da293bca9" title=" " alt="" coords="959,343,1049,369"/>
<area shape="rect" href="except_8cpp.html#a22774895a61498576dc2341a2e5c9a9b" title=" " alt="" coords="633,742,871,767"/>
<area shape="rect" href="packmast_8cpp.html#ab2826b93c2e4dff8a96d10ae4b339a02" title=" " alt="" coords="698,643,806,669"/>
<area shape="rect" href="packmast_8cpp.html#a3778019728c2adc3dcdb53395ca14e3a" title=" " alt="" coords="690,791,814,817"/>
<area shape="rect" href="classPackMaster.html#abefe3e4c344b29297ef81d55aee73dd7" title=" " alt="" coords="653,693,851,718"/>
<area shape="rect" href="classPackMaster.html#a288e2eb5e59389d1352583d07ba5a695" title=" " alt="" coords="396,841,583,866"/>
<area shape="rect" href="except_8cpp.html#a4b52c1f2e05c62e486a6f26df6461399" title=" " alt="" coords="689,841,815,866"/>
<area shape="rect" href="util_8cpp.html#a08154d2484b918ec2952f55843b05c88" title=" " alt="" coords="445,1293,533,1318"/>
<area shape="rect" href="util_8cpp.html#a5c83b1bc214e711893846fc9c51cc437" title=" " alt="" coords="434,1243,545,1269"/>
<area shape="rect" href="xspan__impl__common_8h.html#a60304b65bf89363bcc3165d3cde67f86" title=" " alt="" coords="465,1145,513,1170"/>
<area shape="rect" href="snprintf_8cpp.html#aefb5ecd87245d4c8804418d9fd916d5f" title=" " alt="" coords="420,1194,559,1219"/>
<area shape="rect" href="bsd_8h.html#a6c7d9dab2af60c7bf5cc0ba58bda4e12" title=" " alt="" coords="721,1495,783,1521"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="work_8cpp_acb26fb37f44aef462017c0319a0c7b51_icgraph.png" border="0" usemap="#awork_8cpp_acb26fb37f44aef462017c0319a0c7b51_icgraph" alt=""/></div>
<map name="awork_8cpp_acb26fb37f44aef462017c0319a0c7b51_icgraph" id="awork_8cpp_acb26fb37f44aef462017c0319a0c7b51_icgraph">
<area shape="rect" title="process one file" alt="" coords="363,5,459,31"/>
<area shape="rect" href="work_8cpp.html#a9ec6798d280944a40890ad8f08dbe964" title=" " alt="" coords="243,5,315,31"/>
<area shape="rect" href="main_8cpp.html#ae733ccfc8b1bfd23af63d56f51903f1d" title="main entry point" alt="" coords="108,5,195,31"/>
<area shape="rect" href="main_8cpp.html#a7726c3c4e37d3478021cf41b755207eb" title="real entry point" alt="" coords="5,5,60,31"/>
</map>
</div>

</div>
</div>
<a id="aca58fe437d9c78619cc91ef407e349ab" name="aca58fe437d9c78619cc91ef407e349ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca58fe437d9c78619cc91ef407e349ab">&#9670;&#160;</a></span>unlink_ofile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unlink_ofile </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>oname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>process all files from the commandline </p>

<p class="definition">Definition at line <a class="el" href="work_8cpp_source.html#l00402">402</a> of file <a class="el" href="work_8cpp_source.html">work.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  402</span>                                               {</div>
<div class="line"><span class="lineno">  403</span>    <span class="keywordflow">if</span> (oname &amp;&amp; oname[0]) {</div>
<div class="line"><span class="lineno">  404</span>        (void) <a class="code hl_function" href="classFileBase.html#a58f395d46f5df0c5c10c88f0f5b89924">FileBase::unlink_noexcept</a>(oname); <span class="comment">// IGNORE_ERROR</span></div>
<div class="line"><span class="lineno">  405</span>        oname[0] = 0;                            <span class="comment">// done with oname</span></div>
<div class="line"><span class="lineno">  406</span>    }</div>
<div class="line"><span class="lineno">  407</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classFileBase.html#a58f395d46f5df0c5c10c88f0f5b89924">FileBase::unlink_noexcept()</a>.</p>

<p class="reference">Referenced by <a class="el" href="conf_8h.html#a9ec6798d280944a40890ad8f08dbe964">do_files()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="work_8cpp_aca58fe437d9c78619cc91ef407e349ab_cgraph.png" border="0" usemap="#awork_8cpp_aca58fe437d9c78619cc91ef407e349ab_cgraph" alt=""/></div>
<map name="awork_8cpp_aca58fe437d9c78619cc91ef407e349ab_cgraph" id="awork_8cpp_aca58fe437d9c78619cc91ef407e349ab_cgraph">
<area shape="rect" title="process all files from the commandline" alt="" coords="5,5,103,31"/>
<area shape="rect" href="classFileBase.html#a58f395d46f5df0c5c10c88f0f5b89924" title=" " alt="" coords="151,5,343,31"/>
<area shape="rect" href="bsd_8h.html#a6c7d9dab2af60c7bf5cc0ba58bda4e12" title=" " alt="" coords="391,5,453,31"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="work_8cpp_aca58fe437d9c78619cc91ef407e349ab_icgraph.png" border="0" usemap="#awork_8cpp_aca58fe437d9c78619cc91ef407e349ab_icgraph" alt=""/></div>
<map name="awork_8cpp_aca58fe437d9c78619cc91ef407e349ab_icgraph" id="awork_8cpp_aca58fe437d9c78619cc91ef407e349ab_icgraph">
<area shape="rect" title="process all files from the commandline" alt="" coords="363,5,460,31"/>
<area shape="rect" href="work_8cpp.html#a9ec6798d280944a40890ad8f08dbe964" title=" " alt="" coords="243,5,315,31"/>
<area shape="rect" href="main_8cpp.html#ae733ccfc8b1bfd23af63d56f51903f1d" title="main entry point" alt="" coords="108,5,195,31"/>
<area shape="rect" href="main_8cpp.html#a7726c3c4e37d3478021cf41b755207eb" title="real entry point" alt="" coords="5,5,60,31"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="work_8cpp.html">work.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
